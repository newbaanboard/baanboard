<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="keywords" content="killing bshell in win nt, baan,baanerp,erp,forum,discussion,bulletin board" />
	<meta name="description" content="[Archive] killing bshell in win nt Tools Administration &amp; Installation" />
	
	<title>killing bshell in win nt [Archive]  - Baanboard.com</title>
	<link rel="stylesheet" type="text/css" href="../styles.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar"><a href="../index.html">Newbaanboard</a> &gt; <a href="../index.html">Baan Quick Support: Functional &amp; Technical</a> &gt; <a href="../index.html">Tools Administration &amp; Installation</a> &gt; killing bshell in win nt</div>
<hr />
<div class="pda"></div>

<hr />

<div class="post"><div class="posttop"><div class="username">jcasanov</div><div class="date">12th September 2006, 17:41</div></div><div class="posttext">Hi,<br />
<br />
I have a problem with licenses, from time to time when users let processes runing at night at the next day the session they let running has crashed and the bshell they were using is closed but their license is still showed in <br />
licmon -w<br />
<br />
when i execute: licmon -w | find &quot;jcasanov&quot;<br />
i got this: <br />
server         bx/bw   jcasanov.1035  server         12-09-2006 07:57 <br />
<br />
i guess the 1035 is the pid of the bshell jcasanov was using so i tried<br />
bshcmd -k 0 1035  (to kill the bshell subprocess itself) but because the bshell is not running it simply waits... but not do anything...<br />
<br />
so, my question is: is there a way to free that licence without reboot the server?<br />
<br />
thanks in advance,<br />
Jaime Casanova</div></div><hr />


<div class="post"><div class="posttop"><div class="username">norwim</div><div class="date">12th September 2006, 18:22</div></div><div class="posttext">Hi there,<br />
<br />
use -e instead of -k<br />
<br />
regards<br />
<br />
Norbert</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jcasanov</div><div class="date">12th September 2006, 18:59</div></div><div class="posttext">Thanks for the answer...<br />
<br />
i tried &quot;bshcmd -e 1035&quot; and it simply waits (i wait for a minute before stopping it). <br />
is this a long running operation?<br />
<br />
Maybe i just have to wait longer? any other idea?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Darren Phillips</div><div class="date">13th September 2006, 02:34</div></div><div class="posttext">have you tried using the clean option in licom</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sukesh75</div><div class="date">13th September 2006, 08:04</div></div><div class="posttext">It would be good if you can put the cleanup command in a job(using Scheduled Tasks) which could be run every hour or every other hour and which would take care of runaway baan processes that takes up licenses even after user closes the bshell..<br />
<br />
the command for clean up is licmon -c<br />
<br />
sk</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bilmaa</div><div class="date">13th September 2006, 10:58</div></div><div class="posttext">I think is more easy that stop and start the baan licencing service this liberate the licency</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sukesh75</div><div class="date">13th September 2006, 12:48</div></div><div class="posttext">When you do this, you are going to throw off any user who is connected to Baan at that time. Dont think the users would appreciate that. licmon -c doesnt touch the logins that are valid....<br />
<br />
sk</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Kozure Ohashi</div><div class="date">13th September 2006, 13:17</div></div><div class="posttext">My suggestions:<br />
<br />
Better to run the licmon utility with the kill orphanded licenses e.g. with the taskmanager of windows.<br />
<br />
Up to now we had no problems with the live system, the command seems to be stable.<br />
<br />
Regards,<br />
<br />
Kozure</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jcasanov</div><div class="date">13th September 2006, 17:45</div></div><div class="posttext">have you tried using the clean option in licom<br />
<br />
thanks for all the responses...<br />
<br />
my version of licmon doesn't seems to know about the clean option<br />
<br />
Usage: licmon [-vVdbBwkus][-h host][-p num]<br />
   -v         : show version<br />
   -b         : show brandinfo<br />
   -B         : show brandinfo from brandfile and shared memory<br />
   -C         : clear brandinfo from shared memory<br />
   -w         : show users<br />
   -W         : show other connections<br />
   -a          : show all connections<br />
   -p [num] : check connections (ping)<br />
   -k          : kill server<br />
   -u          : show usercount<br />
   -s          : show statistics<br />
<br />
C:\baan\bin&gt;licmon -v<br />
Copyright   Baan, 1990-2001<br />
Porting set 6.1c.06.01<br />
Port number PA.1649<br />
<br />
regards,<br />
Jaime Casanova</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Darren Phillips</div><div class="date">13th September 2006, 18:14</div></div><div class="posttext">brandinfo        show the brand information of this host<br />
BRANDINFO        show the brand information from the file<br />
help             show this information<br />
ping [number]    ping the licence server (test connection)<br />
quit             quit licence monitor<br />
stats            show server statistics<br />
users            show usercount<br />
who [all|ALL]    list [other | all] users<br />
clean            cleanup orphaned local licences<br />
<br />
D:\baan\bin&gt;licmon -v<br />
Copyright       2004 Baan International BV<br />
Porting set 6.1c.07.06<br />
Port number     PA.2644</div></div><hr />


<div class="post"><div class="posttop"><div class="username">NirajKakodkar</div><div class="date">9th October 2006, 15:14</div></div><div class="posttext">hi ,<br />
<br />
 try <br />
<br />
 1) licmon -&gt;<br />
<br />
 2) clean -&gt;<br />
<br />
to kill<br />
<br />
 bshcmd -e &lt;pid&gt;<br />
<br />
regards,<br />
niraj</div></div><hr />


<div class="post"><div class="posttop"><div class="username">NirajKakodkar</div><div class="date">1st November 2006, 14:27</div></div><div class="posttext">Hi ,<br />
<br />
 Using bshcmd -e &lt;pid&gt; , we can kill one user at a time<br />
 Is it possible to kill all user in one command<br />
 Is there anything like<br />
<br />
 bshcmd -e &lt;pid1&gt; , &lt;pid2&gt; ..........<br />
 <br />
 or something like killall for win NT<br />
<br />
Regards,<br />
Niraj</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sukesh75</div><div class="date">1st November 2006, 15:54</div></div><div class="posttext">Since users could be thrown off by stopping and restarting Baan Licensing Service, you could probably use the command<br />
c:\Net Stop BaanLicensing <br />
<br />
followed by <br />
<br />
c:\Net Start BaanLicensing<br />
<br />
sk</div></div><hr />


<div class="post"><div class="posttop"><div class="username">suhas-mahajan</div><div class="date">3rd November 2006, 07:32</div></div><div class="posttext">Hi<br />
<br />
Hang users are major problem of BaaN licensing mechanism specifically in high-available 24/7 centralised operations. At that time, you can not restart licence service, because it abnormally disconnects active users and there are chances of data inconsistency/corruction in database.<br />
<br />
Thats why in newer porting sets BaaN has provided -c in licmon program. In my experience -c can fails some times.<br />
<br />
You can use pskill available here http://www.sysinternals.com/Utilities/PsKill.html<br />
or kill command provided in windows resouce kit. But that can also fails.;) <br />
<br />
regards,<br />
<br />
-Suhas</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nidyar</div><div class="date">19th November 2006, 08:51</div></div><div class="posttext">I think it would be better to put a scheduled task in the server that runs a batch file every 5 hour that stops and starts the licderp  (licderp -stop and licderp -start). This will not trouble existing users as far as I have seen in B50c. You may try for BIVc4.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">KimSharp</div><div class="date">4th December 2006, 18:48</div></div><div class="posttext">Does not effect users logged in in IVc3 or IVc4.  It does not log them out.  They will remain logged in but the license manager will not recognize them.  The only problem you may have is if you run into maximum number of users while users not logged through the license manager still exist.  These users will get the message maximum number of users reached although they are already logged in because the license manager does not recognize them.<br />
<br />
The clean fuction does not exist in older porting sets but I'm not sure when it was introduced.</div></div><hr />



</div>
</body>
</html>