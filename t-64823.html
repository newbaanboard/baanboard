<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="keywords" content="AFS issue with Find, baan,baanerp,erp,forum,discussion,bulletin board" />
	<meta name="description" content="[Archive] AFS issue with Find AFS/DDC/OLE: Function servers" />
	
	<title>AFS issue with Find [Archive]  - Baanboard.com</title>
	<link rel="stylesheet" type="text/css" href="../styles.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar"><a href="index.html">Newbaanboard</a> &gt; <a href="index.html">Baan SIGs</a> &gt; <a href="index.html">AFS/DDC/OLE: Function servers</a> &gt; AFS issue with Find</div>
<hr />
<div class="pda"></div>

<hr />

<div class="post"><div class="posttop"><div class="username">Ankita Patel</div><div class="date">24th October 2013, 10:36</div></div><div class="posttext">Hi all,<br />
<br />
I have written AFS on session timps3501m000.<br />
timps3501m000 session stores last found value as the default values. <br />
I'm trying to find data from session timps3501m000, find returns 1  but when I'm trying to retrieve the value it gives me default values.<br />
<br />
please help me out ..</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mark_h</div><div class="date">24th October 2013, 15:56</div></div><div class="posttext">Post your code?  That session might need you to do a change.view followed by a find.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Ankita Patel</div><div class="date">25th October 2013, 09:21</div></div><div class="posttext">Hi mark, <br />
<br />
here is the code <br />
<br />
 stpapi.clear(&quot;timps3501m000&quot;)<br />
 stpapi.put.field( &quot;timps3501m000&quot;, &quot;plan.site&quot;,&quot;500&quot; )<br />
 stpapi.put.field( &quot;timps3501m000&quot;, &quot;timps300.plnc&quot;,&quot;MPE&quot;)<br />
 stpapi.put.field( &quot;timps3501m000&quot;, &quot;timps300.plvl&quot;,&quot;4&quot;)<br />
 stpapi.put.field( &quot;timps3501m000&quot;, &quot;timps300.plni&quot;,&quot;8002297&quot; )<br />
 retval = stpapi.find(&quot;timps3501m000&quot;)<br />
<br />
find returns 1 but when I'm trying to get the value of plnc,plvl and plni it gives me the default values that is stored in session</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bhushanchanda</div><div class="date">25th October 2013, 12:22</div></div><div class="posttext">Hi,<br />
<br />
Have you tried combining change.view() &amp; browse.set() or change.view() &amp; find()?<br />
<br />
Check this Thread (http://www.baanboard.com/baanboard/showthread.php?t=54480).<br />
<br />
There can be many reasons, I am on LN, so don't have this session in my Env.<br />
<br />
Also, as Mark said, you might try using stpapi.change.view() before using stpapi.find() or you can do a change.view() and then browse.set().<br />
<br />
Also, check the indexes on the table if you are missing something.<br />
<br />
These links can help you:-<br />
<br />
1 (http://www.baanboard.com/baanboard/showthread.php?t=53201)<br />
2 (http://www.baanboard.com/baanboard/showthread.php?t=54269)<br />
3 (http://www.baanboard.com/baanboard/showthread.php?p=144564)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mark_h</div><div class="date">25th October 2013, 16:28</div></div><div class="posttext">I think bhushan has most of the basics covered.  I ran the session on my system.  I really do not have any permissions in it.  From just running my session the plan site was on form 1.  To get it set it looks like you enter hit and then hit the exit button.  From the looks of it the default is the current company.  So do you even need to enter it?<br />
<br />
If you do the way I would play with writing the session - I would first put the plan site and then use stpapi.application.option to exist the choice.user.2 option.  Which is what it looks like to me.  Then I would try the find.  On my system the find includes the plan code, plan level, item, period date.  So I would only put those fields - well at least the first two fields, followed by the find.<br />
<br />
If the above did not work I would then do the same thing for the site code, but I would then do a change view, followed by a find.  See if that works - if not then more playing around with the various commands.  Since we do not have source code I can use qkey to just give me an idea of what the session does.<br />
<br />
The whole key to AFS is to try to mimic what you would do manually.  I usually document a simple little flow chart of what I hit and what the session does.  In this case it looks like (if I used the session) I would just start the session, hit find to get the right plan level.  So I would not mess with the site unless I had to.  No promises any of this works and sometimes you just have to play with the commands and the sessions to get them to work.</div></div><hr />



</div>
</body>
</html>