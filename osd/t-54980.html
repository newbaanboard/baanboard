<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="keywords" content="Table got locked, baan,baanerp,erp,forum,discussion,bulletin board" />
	<meta name="description" content="[Archive] Table got locked Operating Systems &amp; Databases" />
	
	<title>Table got locked [Archive]  - Baanboard.com</title>
	<link rel="stylesheet" type="text/css" href="../styles.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar"><a href="../index.html">Newbaanboard</a> &gt; <a href="../index.html">Baan Quick Support: Functional &amp; Technical</a> &gt; <a href="../index.html">Operating Systems &amp; Databases</a> &gt; Table got locked</div>
<hr />
<div class="pda"></div>

<hr />

<div class="post"><div class="posttop"><div class="username">mpchheda</div><div class="date">6th February 2009, 11:04</div></div><div class="posttext">http://www.baanboard.com/baanboard/showthread.php?p=79250#poststop<br />
<br />
Continued to above post...i am also facing similar problem.<br />
We have a customised table. And it is get locked. Even after restarting baan and database server it is in locked condition. I want to import some data in this table. It is not allowing me to change / modify and insert.<br />
<br />
How to unlock this table. My database is SQL7. Attached Window NT event view log detail. The error is 1000 - and 850 (Transaction rolled back) db.eq<br />
<br />
BR/<br />
<br />
Manish</div></div><hr />


<div class="post"><div class="posttop"><div class="username">toolswizard</div><div class="date">6th February 2009, 15:17</div></div><div class="posttext">The document you supplied is that the database is not on.  When do you get the error?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mpchheda</div><div class="date">7th February 2009, 06:13</div></div><div class="posttext">No. It when my database is open and i am trying to modify record VIA GTM. The error is Window NT event viewer log details.<br />
<br />
This morning also i have restarted the server so everthing is working fine but for this table i am getting following error message while updating through GTM -<br />
1:Process 5 - Fatal Error - Transaction rolled back. Please try again. (ttdvml070100)<br />
2:Process 5 - Fatal Error - Cannot continue in ttaad4100 (ask.enum)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mpchheda</div><div class="date">14th March 2009, 07:11</div></div><div class="posttext">Will Reorg table help --ttaad4225m000 ???</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ks_ks_</div><div class="date">14th March 2009, 14:30</div></div><div class="posttext">Restart the DB should work I believe.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mpchheda</div><div class="date">17th March 2009, 11:06</div></div><div class="posttext">Doing restart every morning.....But cant unlock the table....</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sushil</div><div class="date">17th March 2009, 11:24</div></div><div class="posttext">1:Process 5 - Fatal Error - Transaction rolled back. Please try again. (ttdvml070100)<br />
<br />
Hi,<br />
<br />
the Transaction roll back also occurs due to dead locks . check your Cust.program / session and try analyzing the clashing of resources that causes DEAD LOCK.<br />
<br />
(if its oracle - you could simple check alert logs)<br />
I am good with Oracle,sql 2000  but not with SQL 7, so any other member may throw some light or google it for SQL7 analysis tools.<br />
<br />
Note : in sql 2000 - you have a procedure sp_lock - check the same with sql 7 , when it is locked.<br />
also try - http://support.microsoft.com/kb/q169960/<br />
<br />
BR,<br />
Sushil Kumar Mudaliar</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mpchheda</div><div class="date">18th March 2009, 07:02</div></div><div class="posttext">Hi Sushil,<br />
<br />
Thanks for your suggestion. I went in SQL7 enterprise Manager. Surprisingly i could not see the stored procedure for this table for live company (pttdvml070100). 100 is our live company and few months back there was similar problem in uploading data in table <br />
tdvml070. And at that time i remember the procedure for the same was deleted. But at that time data was getting uploaded through exchange scheme.<br />
Can you tell me in brief what does this stored procedure does and how to retrieve this for company 100? (You can tell me on the basis of SQL2000)<br />
<br />
Regards,<br />
<br />
Manish</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sushil</div><div class="date">18th March 2009, 07:17</div></div><div class="posttext">Hi,<br />
<br />
Plz be informed ,as per my understanding - all the SQL SP recides in master only.<br />
<br />
the link below explains the procedure.<br />
<br />
http://msdn.microsoft.com/en-us/library/aa238824(SQL.80).aspx<br />
 <br />
BR,<br />
Sushil Kumar Mudaliar</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mpchheda</div><div class="date">18th March 2009, 08:25</div></div><div class="posttext">Hi,<br />
I have created a Stored Procedure for my table , which was missing. And now i can modify any record in table.<br />
The problem is resolve.<br />
<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sushil</div><div class="date">18th March 2009, 08:29</div></div><div class="posttext">Kindly Post the Solution in terms of :<br />
<br />
1.Stored procedure name.<br />
2.Script that restored the procedure.<br />
<br />
So it could be reffered back , in case if any one faces the same kind of problem.<br />
<br />
Thanks for understanding.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mpchheda</div><div class="date">19th March 2009, 07:41</div></div><div class="posttext">The Stored Procedure name is -pttdvml070100_1 and the script is as below...<br />
<br />
<br />
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br />
CREATE PROCEDURE dbo.Pttdvml070100_1<br />
	@hash1 BINARY(23),<br />
	@mode smallint<br />
AS<br />
	if @mode = 1<br />
	begin<br />
		SELECT t_item, t_opstk, t_cwar, t_opamnt, t_opdate, t_opfloor, t_opfval, t_Refcntd, t_Refcntu, hash1 FROM dbo.ttdvml070100 (NOLOCK FASTFIRSTROW INDEX=Ittdvml070100_1a) WHERE hash1 = @hash1<br />
		return<br />
	end<br />
	if @mode = 2<br />
	begin<br />
		SELECT t_item, t_opstk, t_cwar, t_opamnt, t_opdate, t_opfloor, t_opfval, t_Refcntd, t_Refcntu, hash1 FROM dbo.ttdvml070100 (UPDLOCK FASTFIRSTROW INDEX=Ittdvml070100_1a) WHERE hash1 = @hash1<br />
		return<br />
	end<br />
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br />
<br />
Hope this should help....<br />
<br />
Regards,<br />
<br />
Manish Chheda</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Dikkie Dik</div><div class="date">25th March 2009, 17:27</div></div><div class="posttext">Now I understand how you get this locking issue. I thought that nobody used the Level 1 driver nowadays, but this explains a lot.<br />
Good you found it, hope you never run into this issue again.<br />
Thanks for your explanation, it refreshed my mind.<br />
<br />
Regards,<br />
Dick</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ashu2814</div><div class="date">1st June 2009, 09:27</div></div><div class="posttext">u can restart the shared memory</div></div><hr />



</div>
</body>
</html>