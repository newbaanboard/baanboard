<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="keywords" content="Detected database server termination ...more, baan,baanerp,erp,forum,discussion,bulletin board" />
	<meta name="description" content="[Archive] Detected database server termination ...more Operating Systems &amp; Databases" />
	
	<title>Detected database server termination ...more [Archive]  - Baanboard.com</title>
	<link rel="stylesheet" type="text/css" href="../styles.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar"><a href="../index.html">Newbaanboard</a> &gt; <a href="../index.html">Baan Quick Support: Functional &amp; Technical</a> &gt; <a href="../index.html">Operating Systems &amp; Databases</a> &gt; Detected database server termination ...more</div>
<hr />
<div class="pda"></div>

<hr />

<div class="post"><div class="posttop"><div class="username">alejandro</div><div class="date">24th August 2007, 14:30</div></div><div class="posttext">We have installed porting 6.1c.07.09 on a BaaN IV c4 installation.<br />
Tests are OK but this. Users are logout with a 'Conection with server lost' message and here are lines from log.bshell6.1<br />
<br />
<br />
2007-08-24[12:01:29]:E:taa: ******* S T A R T of Error message *******<br />
2007-08-24[12:01:29]:E:taa: Log message called from /BAAN/view/port.6.1c.07.09/vobs/tt/mir/mir/main.c: #1676 keyword: signal handler<br />
2007-08-24[12:01:29]:E:taa: Pid 26355 Uid 1012 Euid 1012 Gid 125 Egid 125<br />
2007-08-24[12:01:29]:E:taa: user_type N language 5 user_name taa tty ote locale ISO88591/NULL<br />
2007-08-24[12:01:29]:E:taa: Errno 0 bdb_errno 0<br />
2007-08-24[12:01:29]:E:taa: Log_mesg: Detected database server termination<br />
2007-08-24[12:01:29]:E:taa: ******* E N D of Error message *******<br />
2007-08-24[12:01:34]:E:taa:<br />
2007-08-24[12:01:34]:E:taa: ******* S T A R T of Error message *******<br />
2007-08-24[12:01:34]:E:taa: Log message called from /BAAN/view/port.6.1c.07.09/vobs/tt/lib/nw_1/ipc_fdio.c: #225 keyword: IPC<br />
2007-08-24[12:01:34]:E:taa: Pid 26355 Uid 1012 Euid 1012 Gid 125 Egid 125<br />
2007-08-24[12:01:34]:E:taa: user_type N language 5 user_name taa tty ote locale ISO88591/NULL<br />
2007-08-24[12:01:34]:E:taa: Errno 32 (Broken pipe) bdb_errno 0<br />
2007-08-24[12:01:34]:E:taa: Log_mesg: Connection to server lost: fd_write 12: num_bytes -1 errno 32<br />
2007-08-24[12:01:34]:E:taa: ******* E N D of Error message *******<br />
2007-08-24[12:01:35]:E:taa:<br />
2007-08-24[12:01:35]:E:taa: ******* S T A R T of Error message *******<br />
2007-08-24[12:01:35]:E:taa: Log message called from /BAAN/view/port.6.1c.07.09/vobs/tt/lib/al_1/al_log.c: #1191 keyword: stack trace<br />
2007-08-24[12:01:35]:E:taa: Pid 26355 Uid 1012 Euid 1012 Gid 125 Egid 125<br />
2007-08-24[12:01:35]:E:taa: user_type N language 5 user_name taa tty ote locale ISO88591/NULL<br />
2007-08-24[12:01:35]:E:taa: Errno 2 (No such file or directory) bdb_errno 0<br />
2007-08-24[12:01:35]:E:taa: 26355:    bshell (taa@0000-PC-003018:3472/SOCKET) -1 545 0 1<br />
2007-08-24[12:01:35]:E:taa:  ff1a03e4 waitid   (0, 6f39, ffbfb488, 103)<br />
2007-08-24[12:01:35]:E:taa:  ff195124 system   (ffbfb758, 1f7488, 66f3, 24b61c, 0, 235000) + 240<br />
2007-08-24[12:01:35]:E:taa:  000e99cc create_stack_trace (1f7400, 24b400, ffbeb924, 235000, 1f7400, 1) + 98<br />
2007-08-24[12:01:35]:E:taa:  000e985c log_stack_trace (0, 6, ffbeb924, 2506a8, 27, 44) + 4<br />
2007-08-24[12:01:35]:E:taa:  000e99e4 crash_notification (0, 4, 1, 0, 183, 21c400) + 4<br />
2007-08-24[12:01:35]:E:taa:  000fe328 do_emergency (24df10, 252c9c, 252cc0, 0, e99e0, 252c00) + 28<br />
2007-08-24[12:01:35]:E:taa:  001a25fc detach_on_io_error (1, e1, 200de0, 0, 24b800, 141) + 48<br />
2007-08-24[12:01:35]:E:taa:  001a1d30 fd_write (200c00, ffffffff, ffffffff, 27b880, 261000, 20) + c4<br />
2007-08-24[12:01:35]:E:taa:  000f8af4 sflush   (24df48, 24df48, 2284e4, ffbf9f48, 2548b0, 20) + 54<br />
2007-08-24[12:01:35]:E:taa:  0012ffc4 client_commu (27b838, 131630, 221834, 254898, 14, 5) + 3c<br />
2007-08-24[12:01:35]:E:taa:  0012f730 bdb_do_exec_db (27b8d0, 8005, 5, 2548a0, 254800, 260fa0) + d4<br />
2007-08-24[12:01:35]:E:taa:  001391e8 bdb_exec_db (5, 1, 0, 268c00, 27b4f4, 3) + 5bc<br />
2007-08-24[12:01:35]:E:taa:  00070840 free_all_pr_tables (29b008, 21e440, 260c00, 21eca0, 2d0318, 21ec00) + 74<br />
2007-08-24[12:01:35]:E:taa:  00065038 process_destroy_fase_1 (29b008, 0, 21e400, 138, 279c48, 3) + 90<br />
2007-08-24[12:01:35]:E:taa:  00064f74 process_unlink (29b008, 0, 235400, 21e5d8, 276460, 261800) + 58<br />
2007-08-24[12:01:35]:E:taa:  00121ac8 _DsForHashTable (21db90, 64f1c, 0, 21dbc0, 0, 8) + 34<br />
2007-08-24[12:01:35]:E:taa:  0005e194 stop     (ffffffff, 4, 2284e4, ffbf9f48, ffbfaf48, 0) + e4<br />
2007-08-24[12:01:35]:E:taa:  0005ed40 server_death (1f0800, 1, 246c00, 1f0800, 1f0800, 0) + 68<br />
2007-08-24[12:01:35]:E:taa:  001a25cc detach_on_io_error (27b880, 2516a8, 1000, 0, 0, 5ecd8) + 18<br />
2007-08-24[12:01:35]:E:taa:  001a1c50 fd_read  (0, 2516a8, 1000, 27b880, 1000, 261000) + c4<br />
2007-08-24[12:01:35]:E:taa:  000f9e14 _sfilbuf (24df10, 2516a8, 9, a03, ce, d91) + fc<br />
2007-08-24[12:01:35]:E:taa:  000fb9a0 r_long   (24df10, ffffffff, 26f, ffbfc13c, 0, ffbfc13c) + 24<br />
2007-08-24[12:01:35]:E:taa:  00131280 client_get_commu_sql (254898, 24df10, 2516a8, 260c00, ffff8000, 13127c) + 4<br />
2007-08-24[12:01:35]:E:taa:  0012ffe8 client_commu (27b838, 132488, 221834, 254898, 28, a) + 60<br />
2007-08-24[12:01:35]:E:taa:  0012fc70 bdb_exec_sql (27b838, 8965c0, 816420, 0, 816478, ffbfc2dc) + 60<br />
2007-08-24[12:01:35]:E:taa:  0015dd14 get_db_view_result (816420, 261800, 28, 6534e0, 816408, 2) + 80<br />
2007-08-24[12:01:35]:E:taa:  0015cc08 intern_fetch (8163e0, 1, 815408, 0, 9, 816af0) + 70<br />
2007-08-24[12:01:35]:E:taa:  0015cd74 get_next_for_fetch (815408, 0, 0, 261800, 8163e0, 815510) + a0<br />
2007-08-24[12:01:35]:E:taa:  00146e54 sql_fetch (815408, 3, 811570, 0, 0, 1) + 118<br />
2007-08-24[12:01:35]:E:taa:  00074d4c mir_sql_fetch (40000, 260c00, 815408, 262400, 763558, 260c00) + 3c<br />
2007-08-24[12:01:35]:E:taa:  00041dd0 baan_cpu (260c00, 268c00, 8000, 260c00, ffff8000, 260c00) + 4eb0<br />
2007-08-24[12:01:35]:E:taa:  0005db44 main     (83c4, 228400, 216800, 261800, 276460, 21b800) + b48<br />
2007-08-24[12:01:35]:E:taa:  00035888 _start   (0, 0, 0, 0, 0, 0) + 108<br />
2007-08-24[12:01:35]:E:taa:<br />
2007-08-24[12:01:35]:E:taa: ******* E N D of Error message *******<br />
2007-08-24[12:01:35]:E:taa:<br />
2007-08-24[12:01:35]:E:taa: ******* S T A R T of Error message *******<br />
2007-08-24[12:01:35]:E:taa: Log message called from /BAAN/view/port.6.1c.07.09/vobs/tt/lib/nw_1/ipc_fdio.c: #225 keyword: IPC<br />
2007-08-24[12:01:35]:E:taa: Pid 26355 Uid 1012 Euid 1012 Gid 125 Egid 125<br />
2007-08-24[12:01:35]:E:taa: user_type N language 5 user_name taa tty ote locale ISO88591/NULL<br />
2007-08-24[12:01:35]:E:taa: Errno 32 (Broken pipe) bdb_errno 0<br />
2007-08-24[12:01:35]:E:taa: Log_mesg: Connection to server lost: fd_write 12: num_bytes -1 errno 32<br />
2007-08-24[12:01:35]:E:taa: ******* E N D of Error message *******<br />
<br />
<br />
I have searched BaaNboard and most similar is this post (http://www.baanboard.com/baanboard/showthread.php?t=5760&amp;highlight=Connection+server+lost%3A+fd_write)<br />
<br />
Â¿Can anybody help me?<br />
Is there any kind of DD rebuild recommended?, in which order?, for the whole application?<br />
<br />
Thank's in advance.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sukesh75</div><div class="date">25th August 2007, 09:41</div></div><div class="posttext">Is it happening at the server side? If not and only happening at the user side then, what BW version are you running at the client side? Is it B40c.80..??<br />
 <br />
sk</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kaukul</div><div class="date">25th August 2007, 12:11</div></div><div class="posttext">This kind of messages/errors appear after compatibility issues.<br />
<br />
Please check your Porting Set release notes. Whether they have suggested to load any tools solution OR compatibility among &quot;OS Version&quot;, &quot;Porting Set Version&quot;, &quot;BW Client Version&quot; (as suggeted by Sukesh), &quot;BaaN Version&quot;, etc.....<br />
<br />
All these should be compatible with each other.<br />
<br />
Regards,<br />
Kaustubh</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kaukul</div><div class="date">19th September 2007, 12:46</div></div><div class="posttext">was your problem resolved?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">alejandro</div><div class="date">19th September 2007, 13:01</div></div><div class="posttext">Thank you very much for your answers and sorry because I have not replied before.<br />
<br />
We still have the problem.<br />
<br />
We have tested all compatibility and Porting set notes.<br />
We have opened two cases, in Oracle and Infor.<br />
<br />
It appears to be an OCI error. Oracle suggested us to go to last 9.2 patch, so this weekend we migrated database to 9.2.0.8.<br />
<br />
Also BW version is 080, we changed ipc_info in order to work with sockets instead pipes, installed also multi process OS patch (Solaris 9).<br />
<br />
Everything in one step to make good analysis.<br />
<br />
Infor suggested us to make some changes in db_resource introducing max_free_cursor:50 and retained_cursors:40<br />
<br />
<br />
Well, we are still in the problem. :( <br />
<br />
I'll tell you any more, hope good things in next future. <br />
All your help is pretty apreciated.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dave_23</div><div class="date">20th September 2007, 00:09</div></div><div class="posttext">Is this a new install?<br />
<br />
was it working before? if so what changed?<br />
<br />
what is the output of ulimit -a on that machine?<br />
<br />
Dave</div></div><hr />


<div class="post"><div class="posttop"><div class="username">alejandro</div><div class="date">20th September 2007, 11:30</div></div><div class="posttext">It is not a new install.<br />
We upgraded Porting set, BW client, OS Sun and Oracle.<br />
<br />
Actual version for each one is:<br />
<br />
PS - 61c.07.09<br />
BW - 080<br />
OS - Sun Solaris 2.9<br />
Oracle 9.2.0.8<br />
<br />
Also we have tested sessions in ASCII mode and the same problem.<br />
<br />
Sessions that most often produce this problem are:<br />
<br />
- Batches finalization process<br />
- Post Integration transactions to Finance transactions<br />
- Process payments <br />
<br />
Result for ulimit -a is<br />
<br />
time(seconds)        unlimited<br />
file(blocks)         unlimited<br />
data(kbytes)         unlimited<br />
stack(kbytes)        8192<br />
coredump(blocks)     unlimited<br />
nofiles(descriptors) 1024<br />
vmemory(kbytes)      unlimited<br />
<br />
Thank you.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dave_23</div><div class="date">20th September 2007, 17:22</div></div><div class="posttext">stack is too low try upping it to maybe 40960<br />
<br />
Dave</div></div><hr />


<div class="post"><div class="posttop"><div class="username">alejandro</div><div class="date">23rd October 2007, 19:01</div></div><div class="posttext">After all, solution was install last porting set version.<br />
<br />
Now with 6.1c.07.15 everything is normal.<br />
We have tested it before for two weeks in a test server and now in 'real life', and thinks are fine after two complete days. <br />
<br />
Thank you to all for your suggestions.<br />
dave_23, solution you mentioned about changing stack size apply to HP-UX, I think.<br />
<br />
SUN told us not to change those kernel parameters.<br />
Infor recommended us follow Sun recomendation.<br />
<br />
A solution could be change it for the bshell and child process, but not in a global way. Support recommended us install another Porting and was OK.<br />
<br />
So we could not test what you told us.<br />
Thank you too, of course<br />
<br />
And we do not know what was exactly the problem. (If was different than a Porting Set version)  ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ahmer91</div><div class="date">15th November 2007, 19:15</div></div><div class="posttext">check the entry in routing table. <br />
<br />
# netstat -r<br />
<br />
check the gateway and ip settings , are they valid ?<br />
<br />
and also check the host file</div></div><hr />



</div>
</body>
</html>