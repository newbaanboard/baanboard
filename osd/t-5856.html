<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="keywords" content="Cleanup of directory $BSE_TMP, baan,baanerp,erp,forum,discussion,bulletin board" />
	<meta name="description" content="[Archive] Cleanup of directory $BSE_TMP Operating Systems &amp; Databases" />
	
	<title>Cleanup of directory $BSE_TMP [Archive]  - Baanboard.com</title>
	<link rel="stylesheet" type="text/css" href="../styles.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar"><a href="../index.html">Newbaanboard</a> &gt; <a href="../index.html">Baan Quick Support: Functional &amp; Technical</a> &gt; <a href="../index.html">Operating Systems &amp; Databases</a> &gt; Cleanup of directory $BSE_TMP</div>
<hr />
<div class="pda"></div>

<hr />

<div class="post"><div class="posttop"><div class="username">gcharles</div><div class="date">17th July 2002, 13:01</div></div><div class="posttext">Hi everybody,<br />
<br />
Just a simple question, what kind of files do you clean up in directory $BSE_TMP and what periodicity ?<br />
<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Djie-En</div><div class="date">17th July 2002, 13:43</div></div><div class="posttext">Hi,<br />
<br />
All tmp.......-files, qp......-files and bshell.pid-files. (With a date of today minus 3 days).<br />
(The batchjobs are running with another BSE_TMP env.)<br />
<br />
GN</div></div><hr />


<div class="post"><div class="posttop"><div class="username">gcharles</div><div class="date">17th July 2002, 15:31</div></div><div class="posttext">Thanks for your answer.<br />
What are the qp... files about ? They can be very large.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Djie-En</div><div class="date">17th July 2002, 15:55</div></div><div class="posttext">Hi,<br />
<br />
I don't know, but when there has been started some sessions, you will see that one or more qp....files are created. So i think they are being used by the sessionprogram.<br />
It is normal that they disappear when the session has done its work, but it will happen that its hanging on the client, they kill their processes and so the qp....-file remains in the $BSE/tmp.<br />
If you want to be sure if you are allowed to clear it, take a look if the owner of the file still logged on to the server and if the date/time of the file is later than the users login date/time. <br />
(Or give him a tel.call)<br />
<br />
GN</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Han Brinkman</div><div class="date">17th July 2002, 16:05</div></div><div class="posttext">qp files are generated by the db driver in case of long queries and/or sort operations which can not be done by using indexes.<br />
<br />
Furthermore I guess they are generated if you use the as prepared set statement.<br />
<br />
Regards,<br />
Han</div></div><hr />


<div class="post"><div class="posttop"><div class="username">OmeLuuk</div><div class="date">17th July 2002, 16:40</div></div><div class="posttext">These qp files (from query processing ??) are files that come from queries with &quot;as prepared set&quot; clause and indeed, may become huge indeed. But after the session is done, can be removed.<br />
<br />
(useless to say: never delete them when the session still runs)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Francesco</div><div class="date">17th July 2002, 17:51</div></div><div class="posttext">Here is an example of a script that will clean up the temp directory.<br />
<br />
Hoover (http://www.baanboard.com/baanboard/showthread.php?s=&amp;threadid=5861) <br />
<br />
Varieties of this are in every Baan Administrator's toolkit, although a lot will probably just use a one-liner like <br />
find $BSE_TMP -mtime +1 -type f -exec rm {} \; <br />
<br />
I do have a question myself about the contents of the tmp directory, now that you bring it up.<br />
I sometimes find empty directories with the name of a VRC in tmp. What are they used for, what was in them, and why aren't they removed?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Djie-En</div><div class="date">17th July 2002, 18:11</div></div><div class="posttext">Hi Francesco,<br />
<br />
Indeed as you say ...<br />
I see a VRC mentioned too and there were two files in it.<br />
Taking a look into the files, there were several domains explained from our 'tg'-package, module: 'brg'  (DEM package), but were from last year, so i've removed them now.<br />
I think a session in 'tg' will create this files with the VRC too as directory.<br />
<br />
Thanks,<br />
<br />
GN</div></div><hr />


<div class="post"><div class="posttop"><div class="username">OmeLuuk</div><div class="date">18th July 2002, 11:40</div></div><div class="posttext">These tmp directories are remainders if software updates that might have been aborted?<br />
<br />
That is why I like using rm -R {} better.<br />
<br />
But be aware cleaning up the rough way (all older than 2 days) may delete too much, like the rc.start.done and pd_lock file.<br />
<br />
Better is to filter also:<br />
find ${BSE}/tmp -name &quot;qp*&quot; -mtime +7 -print -exec rm {} \;<br />
find ${BSE}/tmp -name &quot;tmp*&quot; -mtime +7 -print -exec rm -R {} \;<br />
find ${BSE}/tmp -name &quot;prtmp*&quot; -mtime +7 -print -exec rm {} \;<br />
find ${BSE}/tmp -name &quot;srt*&quot; -mtime +7 -print -exec rm {} \;<br />
find ${BSE}/tmp -name &quot;bshell*&quot; -mtime +7 -print -exec rm {} \;<br />
<br />
<br />
I saw the Hoover script, but did not check if some files were excluded...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Francesco</div><div class="date">18th July 2002, 17:51</div></div><div class="posttext">I would have to look at the script myself to see what it excludes.<br />
<br />
rc.start.done is probably not included, or rather excluded, because in my case it is owned by the job daemon, running as user job100, and is created with explicit write permissions, so the script, running as bsp, is not allowed to remove it.<br />
<br />
It removes bshell.pids after 7 days, because some people NEVER log off (grrrr) ;)<br />
I thought about testing for bshells owned by the job daemon and excluding them, but I am not sure if that's even an issue. (it's one of those scripts that just seems to do it's job, so I never bothered with it since it's installation).<br />
<br />
I chose to delete tmp files after two days, because of the volume that my customers create. Besides, I don't believe that anybody ever actually uses the reprint function.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">NPRao</div><div class="date">18th July 2002, 19:56</div></div><div class="posttext">checking back on our system, I found few wierd files in $BSE/tmp directory -<br />
<br />
<br />
&gt;cat ad_20170<br />
        r_label.value(1,1) = r_label.adjust(r_label.value(1,1), 1, ttadv.adju.ce<br />
ntre, ttyeno.no, 60, r_label.xpos(1), r_label.leng(1))<br />
        r_label.value(1,2) = r_label.adjust(r_label.value(1,2), 2, ttadv.adju.le<br />
ft, ttyeno.no, 7, r_label.xpos(2), r_label.leng(2))<br />
        r_label.value(1,3) = r_label.adjust(r_label.value(1,3), 3, ttadv.adju.le<br />
ft, ttyeno.no, 4, r_label.xpos(3), r_label.leng(3))<br />
<br />
<br />
Any idea what they are ?<br />
<br />
I guess you can also use the option of -size for the find command to remove the zero sized files...<br />
<br />
<br />
 -size n[c]               True if the file is n blocks long (512 bytes    per block).  If n is followed by a c, the<br />
                               size is in bytes.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Djie-En</div><div class="date">19th July 2002, 10:19</div></div><div class="posttext">Hi NPRao,<br />
<br />
It is better to do not remove the zero files, unless you also take a look for the date, because when a process is started and it takes time before ending, a zero bytes tmp file exists, untill the process is ready.<br />
The ad_1270 file you mentioned, i've never seen such files with such a contents.<br />
<br />
I've often seen files, which started with srt......<br />
Those files were used by sorting the data of a session. Because the session was crashed for some reason, the files weren't removed from the system. So if you see such files and the date is from yesterday or before, you also may remove them.<br />
<br />
GN</div></div><hr />



</div>
</body>
</html>