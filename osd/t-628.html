<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="keywords" content="Linux and Baan: library problems, baan,baanerp,erp,forum,discussion,bulletin board" />
	<meta name="description" content="[Archive] Linux and Baan: library problems Operating Systems &amp; Databases" />
	
	<title>Linux and Baan: library problems [Archive]  - Baanboard.com</title>
	<link rel="stylesheet" type="text/css" href="../styles.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar"><a href="../index.html">Newbaanboard</a> &gt; <a href="../index.html">Baan Quick Support: Functional &amp; Technical</a> &gt; <a href="../index.html">Operating Systems &amp; Databases</a> &gt; Linux and Baan: library problems</div>
<hr />
<div class="pda"></div>

<hr />

<div class="post"><div class="posttop"><div class="username">patvdv</div><div class="date">14th December 2001, 02:01</div></div><div class="posttext">Okay, this one is for the real LINUX gurus out here. I got finally the Linux portingset - thanks Scott! - and with great expectations I started out for Baan installation. I didn't expect it to go smoothly as I am running quite a different system from the one the binaries were originally compiled on:<br />
<br />
 Redhat 7.1 SMP Kernel 2.4.2.2<br />
 Dual CPU 933 Intel<br />
 glibc2.2.4-19<br />
 compat-glibc-6.2-2.1.3.2<br />
<br />
First try to run ba6.1 -v:<br />
<br />
#bash : no such file or directory<br />
<br />
#file ba6.1<br />
<br />
ba6.1: ELF 32-bit LSB executable, Intel 80386, version 1, dynamically linked (uses shared libs), not stripped<br />
Okay seems like the portingset binaries need libc5:<br />
<br />
Installed libc5 and ld.so.1:<br />
<br />
 libc5-5.4.38-3<br />
 ld.so-1.9.5-13<br />
Created /etc/ld.so.preload, reconfigured /etc/ld.so.conf and checked library dependancies:<br />
# ldconfig<br />
# ldd ba6.1<br />
<br />
	/lib/libsafe.so.1.3 =&gt; /lib/libsafe.so.1.3 (0x40021000)<br />
	libm.so.5 =&gt; /usr/i486-linuxlibc5/lib/libm.so.5 (0x40026000)<br />
	libc.so.5 =&gt; /usr/i486-linuxlibc5/lib/libc.so.5 (0x4002f000)<br />
	libdl.so.2 =&gt; /lib/libdl.so.2 (0x400eb000)<br />
	libc.so.6 =&gt; /lib/libc.so.6 (0x400ef000)<br />
	ld-linux.so.2 =&gt; /lib/ld-linux.so.2 (0x4022d000)<br />
Okay, looks good. Second run still ends in segmentation fault.<br />
<br />
Check core with gdb:<br />
#gdb ba6.1 core<br />
<br />
GNU gdb Red Hat Linux (5.1-0.71)<br />
Copyright 2001 Free Software Foundation, Inc.<br />
GDB is free software, covered by the GNU General Public License, and you are<br />
welcome to change it and/or distribute copies of it under certain conditions.<br />
Type &quot;show copying&quot; to see the conditions.<br />
There is absolutely no warranty for GDB.  Type &quot;show warranty&quot; for details.<br />
This GDB was configured as &quot;i386-redhat-linux&quot;...<br />
(no debugging symbols found)...<br />
Core was generated by `./ba6.1 -v'.<br />
Program terminated with signal 11, Segmentation fault.<br />
Reading symbols from /lib/libsafe.so.1.3...(no debugging symbols found)...done.<br />
Loaded symbols for /lib/libsafe.so.1.3<br />
Reading symbols from /usr/i486-linuxlibc5/lib/libm.so.5...done.<br />
Loaded symbols for /usr/i486-linuxlibc5/lib/libm.so.5<br />
Reading symbols from /usr/i486-linuxlibc5/lib/libc.so.5...done.<br />
Loaded symbols for /usr/i486-linuxlibc5/lib/libc.so.5<br />
Reading symbols from /lib/libdl.so.2...done.<br />
Loaded symbols for /lib/libdl.so.2<br />
Reading symbols from /lib/libc.so.6...done.<br />
Loaded symbols for /lib/libc.so.6<br />
Reading symbols from /lib/ld-linux.so.2...done.<br />
Loaded symbols for /lib/ld-linux.so.2<br />
Reading symbols from /lib/ld-linux.so.1...done.<br />
Loaded symbols for /lib/ld-linux.so.1<br />
#0  0x4023a520 in _dl_signal_error (errcode=) at dl-error.c:68<br />
	in dl-error.c<br />
(gdb) quit<br />
<br />
Trace system calls:<br />
# strace -f ba6.1 -v<br />
<br />
......<br />
mprotect(0x400ef000, 1261030, PROT_READ|PROT_WRITE|PROT_EXEC) = 0<br />
open(&quot;/usr/lib/libc.so.6&quot;, O_RDONLY)    = -1 ENOENT (No such file or directory)<br />
open(&quot;/lib/ld-linux.so.2&quot;, O_RDONLY)    = 3<br />
read(3, &quot;\177ELF\1\1\1\0\0\0\0\0\0\0\0\0\3\0\3\0\1\0\0\0\220\36&quot;..., 4096) = 4096<br />
old_mmap(NULL, 94208, PROT_NONE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x4022d000<br />
old_mmap(0x4022d000, 87145, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_FIXED, 3, 0) = 0x4022d000<br />
old_mmap(0x40243000, 1924, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED, 3, 0x15000) = 0x40243000<br />
close(3)                                = 0<br />
mprotect(0x4022d000, 87145, PROT_READ|PROT_WRITE|PROT_EXEC) = 0<br />
munmap(0x40008000, 98793)               = 0<br />
mprotect(0x8048000, 562378, PROT_READ|PROT_EXEC) = 0<br />
mprotect(0x40021000, 13096, PROT_READ|PROT_EXEC) = 0<br />
mprotect(0x40026000, 24992, PROT_READ|PROT_EXEC) = 0<br />
mprotect(0x4002f000, 536799, PROT_READ|PROT_EXEC) = 0<br />
mprotect(0x400eb000, 8205, PROT_READ|PROT_EXEC) = 0<br />
mprotect(0x400ef000, 1261030, PROT_READ|PROT_EXEC) = 0<br />
mprotect(0x4022d000, 87145, PROT_READ|PROT_EXEC) = 0<br />
mprotect(0x40000000, 21772, PROT_READ|PROT_EXEC) = 0<br />
personality(PER_LINUX)                  = 0<br />
geteuid()                               = 0<br />
getuid()                                = 0<br />
getgid()                                = 0<br />
getegid()                               = 0<br />
brk(0x80e7ae4)                          = 0x80e7ae4<br />
brk(0x80e8000)                          = 0x80e8000<br />
brk(0x80e9000)                          = 0x80e9000<br />
brk(0x80ea000)                          = 0x80ea000<br />
.......<br />
On a Redhat 6.2 system with glibc2.1.3 and libc5.3.12-31, the binaries execute without any problem:<br />
<br />
A similar (and successful) strace:<br />
<br />
.......<br />
open(&quot;/usr/i486-linux-libc5/lib/libc.so.5&quot;, O_RDONLY) = 3<br />
read(3, &quot;\177ELF\1\1\1\0\0\0\0\0\0\0\0\0\3\0\3\0\1\0\0\0(k\1\000&quot;..., 4096) = 4096<br />
old_mmap(NULL, 823296, PROT_NONE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x40016000<br />
old_mmap(0x40016000, 592037, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_FIXED, 3, 0) = 0x40016000<br />
old_mmap(0x400a7000, 23728, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED, 3, 0x90000) = 0x400a7000<br />
old_mmap(0x400ad000, 201876, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x400ad000<br />
close(3)                                = 0<br />
mprotect(0x40016000, 592037, PROT_READ|PROT_WRITE|PROT_EXEC) = 0<br />
munmap(0x40008000, 21183)               = 0<br />
mprotect(0x8048000, 562378, PROT_READ|PROT_EXEC) = 0<br />
mprotect(0x4000e000, 24504, PROT_READ|PROT_EXEC) = 0<br />
mprotect(0x40016000, 592037, PROT_READ|PROT_EXEC) = 0<br />
mprotect(0x40000000, 21772, PROT_READ|PROT_EXEC) = 0<br />
personality(PER_LINUX)                  = 0<br />
geteuid()                               = 0<br />
getuid()                                = 0<br />
getgid()                                = 0<br />
getegid()                               = 0<br />
open(&quot;bse_vars&quot;, O_RDONLY)              = -1 ENOENT (No such file or directory)<br />
open(&quot;/usr/bse/bse_vars&quot;, O_RDONLY)     = -1 ENOENT (No such file or directory)<br />
open(&quot;/baan/bse/lib/bse_vars&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)<br />
sigaction(SIGSEGV, {0x80a7a70, [], SA_INTERRUPT|SA_NOMASK|SA_ONESHOT}, {SIG_DFL}, 0x4003dc68) = 0<br />
sigaction(SIGILL, {0x80a7a70, [], SA_INTERRUPT|SA_NOMASK|SA_ONESHOT}, {SIG_DFL}, 0x4003dc68) = 0<br />
umask(0)                                = 022<br />
open(&quot;/baan/bse/log/log.ba6.1&quot;, O_RDWR|O_APPEND|O_CREAT, 0666) = 3<br />
fcntl(3, F_SETFD, FD_CLOEXEC)           = 0<br />
fcntl(3, F_SETFD, FD_CLOEXEC)           = 0<br />
umask(022)                              = 0<br />
write(2, &quot;--------------------------------&quot;..., 56-------------------------------------------------------<br />
) = 56<br />
write(2, &quot;Porting set : 6.1c.03\n&quot;, 22Porting set : 6.1c.03<br />
) = 22<br />
write(2, &quot;Port no.    : TD.PROTO\n&quot;, 23Port no.    : TD.PROTO<br />
) = 23<br />
write(2, &quot;Date        : Mon Jul  6 11:50:2&quot;..., 47Date        : Mon Jul  6 11:50:20 MET DST 1998<br />
) = 47<br />
write(2, &quot;Uname       : Linux cnl01513.baa&quot;..., 82Uname       : Linux cnl01513.baan.com 2.0.18 #1 Tue Sep 10 10:15:48 EDT 1996 i586<br />
) = 82<br />
write(2, &quot;Machine-id  : LINUX_I\n&quot;, 22Machine-id  : LINUX_I<br />
) = 22<br />
write(2, &quot;OS-release  : 2.0\n&quot;, 18OS-release  : 2.0<br />
)     = 18<br />
.....<br />
write(2, &quot;LOADFLAGS   : \n&quot;, 15LOADFLAGS   : <br />
)        = 15<br />
write(2, &quot;--------------------------------&quot;..., 56-------------------------------------------------------<br />
) = 56<br />
write(2, &quot;Copyright (c) 1990-1998 Baan Dev&quot;..., 46Copyright (c) 1990-1998 Baan Development B.V.<br />
) = 46<br />
_exit(0)                                = ?<br />
Someone any idea what might be going wrong? Is there anything else I need to change? If so what would that be? Or is this going to be a wasted effort without  recompilation of the binaries?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">FriarTuck</div><div class="date">15th January 2002, 18:45</div></div><div class="posttext">:confused: <br />
<br />
I need to re-read a doc from a buddy of mine regarding RH 7.x, but I seem to remember a side note stating that the libraries and gcc versions distributed with the 7.0, 7.1 releases were broken.  He even mentioned that the gcc distributed in 7.1 wouldn't compile the kernel.  AFAIK the kernel issue is true as I've run into the same problem.  I wonder if you've run into the buggy lib problem?  :eek:<br />
<br />
To this day I still run 6.2.  Oracle 8i didn't like 7.0 or 7.1 much at all without a whole lot of coaxing and fudging.  Although I did get 8i to run on 7.x, I felt 6.2 would prove much more stable.<br />
<br />
Myself, I'm trying to figure out how to go about getting Baan for Linux.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">patvdv</div><div class="date">15th January 2002, 19:14</div></div><div class="posttext">Hi FriarTuck,<br />
<br />
I can't say I have noticed anything yet about buggy libraries except for the porting set problem. I have Oracle8i running quite stable although the installation of it required quite some hacking in the installer scripts.<br />
<br />
I am not keen on downgrading to 6.2 just for the sake of so I will probably try to get Baan up and running again on W2K or just wait until Baan officially starts supporting Linux :)<br />
<br />
As to your question: you need 2 things:<br />
 the Linux portingset<br />
 an installer master tape.<br />
<br />
You can then replace the portingset that that comes with the Baan master tape with the Linux one and start a fresh install.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">victor_cleto</div><div class="date">16th January 2002, 11:41</div></div><div class="posttext">Also heard of problems with the GnuStep distribution with RH 7.1, they went for the 7.2 release.<br />
<br />
Regarding the installation of Oracle8i in RH7.x, there's a good thread here where this guy explains how he installed 8.1.7 on RH7.1 : http://www.orafaq.com/msgboard/unix/messages/445.htm</div></div><hr />



</div>
</body>
</html>