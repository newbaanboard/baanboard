<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="keywords" content="Using AFS for Sales Orders, baan,baanerp,erp,forum,discussion,bulletin board" />
	<meta name="description" content="[Archive] Using AFS for Sales Orders AFS/DDC/OLE: Function servers" />
	
	<title>Using AFS for Sales Orders [Archive]  - Baanboard.com</title>
	<link rel="stylesheet" type="text/css" href="../styles.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar"><a href="index.html">Newbaanboard</a> &gt; <a href="index.html">Baan SIGs</a> &gt; <a href="index.html">AFS/DDC/OLE: Function servers</a> &gt; Using AFS for Sales Orders</div>
<hr />
<div class="pda"></div>

<hr />

<div class="post"><div class="posttop"><div class="username">asreddy_95</div><div class="date">11th March 2003, 18:45</div></div><div class="posttext">Hi All,<br />
<br />
I am trying to simulate order entry process using AFS.  I have used AFS for receipts and it works like a winner. I have the latest APIHAND objects. Here is what's happening.<br />
<br />
I am trying to create a sales order using the customer defaults and using a fixed order series number and order type. The customer po is generated randomly for now.  On trying to insert using stpapi.insert(..), I get an error message &quot;Customer Purchase Order not allowed&quot;. I am populating the field with a random sting value.  <br />
<br />
here is the sample of the code I am using.<br />
<br />
<br />
stpapi.put.field(&quot;tdsls4101m000&quot;,&quot;tdsls040.orno&quot;,&quot;51&quot;)<br />
stpapi.put.field(&quot;tdsls4101m000&quot;,&quot;tdsls040.cuno&quot;,&quot;850000&quot;)<br />
stpapi.put.field(&quot;tdsls4101m000&quot;,&quot;tdsls040.cotp&quot;,&quot;DEA&quot;)<br />
stpapi.put.field(&quot;tdsls4101m000&quot;,&quot;tdsls040.eono&quot;,&quot;12243&quot;)***( the number 12243 is generated randomly)<br />
<br />
stpapi.insert(&quot;tdsls4101m000&quot;,true,err)<br />
if not isspace(err) then<br />
       stpapi.recover(&quot;tdsls4101m000&quot;,err)<br />
endif<br />
stpapi.end.session(&quot;tdsls4101m000&quot;)<br />
<br />
<br />
I am working on Baan4c3, oracle 8,AIX<br />
<br />
<br />
Here is the AFG.LOG too<br />
<br />
38-&gt;get.fields<br />
38-&gt;get.fields<br />
38&lt;-get.fields^A0^Atdsls040.orno^A1^Atdsls040.corg^A0^Ablock.stat^A0^Atdsls040.c<br />
uno^A1^Atdsls040.cotp^A1^Atcmcs042.dsca^A0^Atccom010.nama^A0^Atdsls040.prno^A1^A<br />
tdsls300.cdes^A0^Atdsls040.odat^A1^Atdsls040.prdt^A1^Atdsls040.ddat^A1^Aalt.date<br />
^A1^Atdsls040.cdec^A1^Atcmcs041.dsca^A0^Atdsls040.crte^A1^Atcmcs004.dsca^A0^Atds<br />
ls040.refa^A1^Atdsls040.refb^A1^Atdsls040.odis^A1^Atxta^A0^Atdsls040.rout^A1^Atd<br />
sls040.acpa^A1^Atdsls040.eono^A1^Aspin^A0^Atdsls040.ccor^A1^Acinv.ccty^A0^Aspin.<br />
dsca^A0^Acinv.nama^A0^Acinv.namc^A0^Acinv.name^A0^Acinv.namf^A0^Ac.cloc^A1^Aspdl<br />
^A0^Atdsls040.cdel^A1^Acdel.ccty^A0^Aspdl.dsca^A0^Acdel.nama^A0^Acdel.namc^A0^Ac<br />
del.name^A0^Acdel.namf^A0^Atdsls040.orno^A0^Atdsls040.cuno^A0^Atccom010.nama^A0^<br />
Atdsls040.ccur^A1^Atcmcs002.dsca^A0^Atdsls040.rats^A1^Atdsls040.ratf^A1^Atdsls04<br />
0.fcrt^A1^Atdsls040.cpay^A1^Atcmcs013.dsca^A0^Atdsls040.ccrs^A1^Atcmcs011.dsca^A<br />
0^Atdsls040.cpls^A1^Atcmcs034.dsca^A0^Atdsls040.pldd^A1^Atcmcs034.dsca^A0^Atdsls<br />
040.pcpr^A1^Atccom010.nama^A0^Atdsls040.pctx^A1^Atccom010.nama^A0^Atdsls040.cfrw<br />
^A1^Atcmcs080.dsca^A0^Atdsls040.cvyn^A1^Atdsls040.scom^A1^Atdsls040.orno^A0^Atds<br />
ls040.cuno^A0^Atccom010.nama^A0^Atdsls040.ccty^A1^Atcmcs010.dsca^A0^Atdsls040.cl<br />
an^A1^Atcmcs046.dsca^A0^Atdsls040.creg^A1^Atcmcs045.dsca^A0^Atdsls040.cbrn^A1^At<br />
cmcs031.dsca^A0^Atdsls040.crep^A1^Atccom001.nama^A0^Atdsls040.cper^A1^Atdsmi120.<br />
surn^A0^Atdsls040.comp^A1^Atccom000.nama^A0^Atdsls040.ctrj^A1^Atrtoc600.dsca^A0^<br />
Atdsls040.futo^A1^Atdsls040.crty^A0^Atdsls040.zero^A0^Atdsls040.text^A0<br />
&gt;tdsls4101m000 put.field:tdsls040.orno     51<br />
&gt;tdsls4101m000 put.field:tdsls040.cuno 850000<br />
&gt;tdsls4101m000 put.field:tdsls040.cotp DEA<br />
&gt;tdsls4101m000 put.field:tdsls040.eono 12243<br />
&gt;tdsls4101m000 insert<br />
38-&gt;add.set+save<br />
38&lt;-add.set+save^A16<br />
&lt;tdsls4101m000 Customer Purchase Order Number not allowed<br />
&gt;tdsls4101m000 recover<br />
38-&gt;recover.set<br />
38&lt;-recover.set^A0<br />
&lt;tdsls4101m000<br />
&gt;tdsls4101m000 update<br />
38-&gt;modify.set+save<br />
38&lt;-modify.set+save^A0<br />
&lt;tdsls4101m000<br />
&gt;tdsls4101m000 get.field:tdsls040.orno<br />
&lt;tdsls4101m000 get.field:tdsls040.orno=51<br />
&gt;tdsls4101m000 end.session<br />
38-&gt;end.program<br />
38&lt;-end.program^A1^A<br />
&gt;tdsls4101m000 put.field:tdsls040.orno     51<br />
&gt;tdsls4101m000 put.field:tdsls040.cuno 850000<br />
&gt;tdsls4101m000 put.field:tdsls040.cotp DEA<br />
&gt;tdsls4101m000 put.field:tdsls040.eono 12243<br />
&gt;tdsls4101m000 insert<br />
41-&gt;add.set+save<br />
41&lt;-add.set+save^A16<br />
&lt;tdsls4101m000 Customer Purchase Order Number not allowed<br />
&gt;tdsls4101m000 recover<br />
41-&gt;recover.set<br />
41&lt;-recover.set^A0<br />
&lt;tdsls4101m000<br />
&gt;tdsls4101m000 update<br />
41-&gt;modify.set+save<br />
41&lt;-modify.set+save^A0<br />
&lt;tdsls4101m000<br />
&gt;tdsls4101m000 get.field:tdsls040.orno<br />
&lt;tdsls4101m000 get.field:tdsls040.orno=51<br />
&gt;tdsls4101m000 end.session<br />
&gt;tdsls4101m000 put.field:tdsls040.orno     51<br />
&gt;tdsls4101m000 put.field:tdsls040.cuno 850000<br />
&gt;tdsls4101m000 put.field:tdsls040.cotp DEA<br />
&gt;tdsls4101m000 put.field:tdsls040.eono 12243<br />
&gt;tdsls4101m000 update<br />
42-&gt;modify.set+save<br />
42&lt;-modify.set+save^A1<br />
&lt;tdsls4101m000 Note: deliveries already invoiced, changing not al<br />
&gt;tdsls4101m000 get.field:tdsls040.orno<br />
&lt;tdsls4101m000 get.field:tdsls040.orno=    51<br />
&gt;tdsls4101m000 end.session<br />
42-&gt;end.program<br />
42&lt;-end.program^A1^A<br />
&gt;tdsls4101m000 put.field:tdsls040.orno     51<br />
&gt;tdsls4101m000 put.field:tdsls040.cuno 850000<br />
&gt;tdsls4101m000 put.field:tdsls040.cotp DEA<br />
&gt;tdsls4101m000 put.field:tdsls040.eono   12243<br />
<br />
<br />
<br />
I would appreciate any comments or ideas.<br />
<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mark_h</div><div class="date">11th March 2003, 22:45</div></div><div class="posttext">I do not know about the sales orders, but when creating purchase orders I just put the first number of the order series.  So if I am going to create an order for my site I would only put &quot;4&quot; into the purchase order number.  The session takes care of creating the order number.  After the order is created I use a get function to retrieve the order number and create the PO lines.  Not sure if this is your case or not since I am not familar with sales orders.<br />
<br />
Good Luck!<br />
<br />
Mark</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Paul P</div><div class="date">12th March 2003, 04:14</div></div><div class="posttext">Dear Sridhar,<br />
<br />
Just a basic debug procedure that we do to try to understand how computer actually thinks :) : have you tried inserting a sales order through AFS without the customer PO number? Does it work if you don't specify the customer PO?<br />
<br />
Rgds,<br />
Paul</div></div><hr />


<div class="post"><div class="posttop"><div class="username">asreddy_95</div><div class="date">12th March 2003, 05:07</div></div><div class="posttext">Hi Paul,<br />
<br />
Tried both, but get the same message. Did check if there was a customer purchase order already. Still no luck. <br />
<br />
Thanks for the reply.<br />
<br />
Sridhar</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mark_h</div><div class="date">12th March 2003, 17:17</div></div><div class="posttext">Would you happen to have source for the session?  If so you could run through code and see what is causing the error.  It could also be that one of the other fields on the forms needs to be completed before it lets you enter a Customer Purchase Order. One other field may not be defaulting correctly using API and you may need to do a put on it.  When you create one by hand and tab through all the fields make note what they default to - and then you can try doing a put on all the fields. You could try that to see if that works.<br />
<br />
You might also want to do a get of the tdpur040.eono field after the insert attempt - you may see that something changed it.<br />
<br />
Just some thoughts.<br />
<br />
Mark</div></div><hr />


<div class="post"><div class="posttop"><div class="username">asreddy_95</div><div class="date">12th March 2003, 22:10</div></div><div class="posttext">Hi Mark,<br />
<br />
Will try and see how it  rolls out. Thanks for the input.<br />
<br />
Sridhar</div></div><hr />


<div class="post"><div class="posttop"><div class="username">asreddy_95</div><div class="date">12th March 2003, 22:49</div></div><div class="posttext">Mark,<br />
<br />
Tried by putting all the defaults which come from customer master and all the mandatory fields. But still get the same error &quot;Customer Purchase Order not allowed&quot;. <br />
<br />
One thing I noticed is before I enter the customer purchase order , if I click on the find button, I get the same message &quot;Customer Purchase Order Not allowed&quot;, so i need to do more digging. <br />
<br />
Thanks for the idea.<br />
<br />
Sridhar</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Paul P</div><div class="date">13th March 2003, 10:54</div></div><div class="posttext">Dear Sridhar,<br />
<br />
Customer PO numbers, by standard in BaanIV, are only used for informational purposes. Some clients have asked for more customer PO functionalities, e.g. prevent entering more than one SO referring to the same customer PO number. The only way to do this is customisation. Now, is your system customised for this purpose? Because the standard BaanIV doesn't give out &quot;Customer Purchase Order not allowed&quot; warning when I try to find data before filling in customer PO number<br />
<br />
Rgds,<br />
Paul</div></div><hr />



</div>
</body>
</html>