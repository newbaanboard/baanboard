<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="keywords" content="Maintain Receipt, baan,baanerp,erp,forum,discussion,bulletin board" />
	<meta name="description" content="[Archive] Maintain Receipt AFS/DDC/OLE: Function servers" />
	
	<title>Maintain Receipt [Archive]  - Baanboard.com</title>
	<link rel="stylesheet" type="text/css" href="../styles.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar"><a href="index.html">Newbaanboard</a> &gt; <a href="index.html">Baan SIGs</a> &gt; <a href="index.html">AFS/DDC/OLE: Function servers</a> &gt; Maintain Receipt</div>
<hr />
<div class="pda"></div>

<hr />

<div class="post"><div class="posttop"><div class="username">pedromrs</div><div class="date">5th November 2002, 19:14</div></div><div class="posttext">Hi,<br />
<br />
I'm having problems with the tdput4210m000 session (Maintain receipts) that i'm trying to automate using stpapi. <br />
<br />
After I fill the &quot;dino&quot; field I do a save which should call up the select order subsession (like it happens manually).<br />
<br />
<br />
baanobj.putfield(sessaorep, &quot;form.dino&quot;, &quot;5454&quot;);<br />
baanobj.handlesubproc(sessaoref,sessaoorder,&quot;add&quot;);<br />
baanobj.save(sessaorep);<br />
baan.obj.putfield(sessaoorder,&quot;form.ordo&quot;,&quot;100030&quot;);<br />
<br />
It hangs after put.field in the subsession. After watching the messages in the console output I see when put.field is called that a createobject is called and then a killprocess. After the killprocess it simply hangs.<br />
<br />
I tried not to call the subsession and insert the info directly:<br />
<br />
baanobj.putfield(sessaorep,&quot;tdpur45.orno&quot;,&quot;100030&quot;);<br />
baanobj.putfield(sessaorep,&quot;tdpur45.pono&quot;,&quot;10&quot;);<br />
baanobj.putfield(sessaorep,&quot;tdpur45.diqu&quot;,&quot;4000&quot;);<br />
baanobj.putfield(sessaorep,&quot;tdpur45.date&quot;,<br />
baanobj.toBaandate(DateTime.Now.ToShortDateString()));<br />
baanobj.putfield(sessaorep,&quot;tdpur45.dqua&quot;,&quot;4000&quot;);<br />
<br />
baanobj.putfield(sessaorep,&quot;tdpur45.copr&quot;,&quot;50,00&quot;);<br />
baanobj.insert(sessaorep,1,ref err);<br />
<br />
But I get a &quot;no plan of costs for this date exists&quot; (translated) error message.<br />
<br />
Can anyone give me a hint here? :) <br />
<br />
Thanks in advance,</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Darren Phillips</div><div class="date">5th November 2002, 19:32</div></div><div class="posttext">Take a look at these threads they should be of some help.<br />
<br />
http://www.baanboard.com/baanboard/showthread.php?s=&amp;threadid=5639<br />
http://www.baanboard.com/baanboard/showthread.php?s=&amp;threadid=696<br />
http://www.baanboard.com/baanboard/showthread.php?s=&amp;threadid=682</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pedromrs</div><div class="date">6th November 2002, 00:49</div></div><div class="posttext">Hi Darren,<br />
<br />
Thanks for the answer but I had already searched and read all those threads. I still have the same problem. <br />
I was hoping someone who automated this session already, could give me a hint if this can be a Baan problem requiring a solution or tell my code is totally wrong. <br />
I think I tried almost everything to make it work but maybe I'm missing something obvious :)<br />
I forgot to mention we have supply chain too.....<br />
<br />
I think in this thread the problem is similar but there is no follow up:<br />
Other thread (http://www.baanboard.com/baanboard/showthread.php?s=&amp;threadid=6201) <br />
<br />
Thanks once more</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Darren Phillips</div><div class="date">6th November 2002, 01:16</div></div><div class="posttext">I also have supply chain  I am not in work for a few days but will try it on my system when I get back. <br />
<br />
Don`t know if this idea is of any use but I have setup a system to maintain receipts via loading the delivery data to the ASN tables and Production Control receipt against the ASN.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pedromrs</div><div class="date">6th November 2002, 11:37</div></div><div class="posttext">Thanks Darren,<br />
<br />
I also have the lot control subsession. I tried to do exactly the same, handle.subproc followed by a changeview or a put.field and it hangs too....I'm starting to think this a Baan problem. <br />
I don't see any reason for it to hardlock....If the subsession doesn't exist it should return an error message. :rolleyes:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pedromrs</div><div class="date">7th November 2002, 21:23</div></div><div class="posttext">Darren and all,<br />
<br />
I managed to make it work compiling it in a Baan DLL. <br />
If I call the same code from the outside it hangs but calling a DLL from the outside works.<br />
<br />
Now I have another problem. We have to use the tdpur4131s000 because of supply chain instead of the order selection subsession.<br />
<br />
<br />
stpapi.handle.subproc( &quot;tdpur4120m000&quot;, &quot;tdpur4131s000&quot;, &quot;add&quot;)<br />
| tdpur4131s000 subsession<br />
        ret = stpapi.change.view(&quot;tdpur4120m000&quot;)<br />
        stpapi.put.field(&quot;tdpur4131s000&quot;, &quot;tdpur45.orno&quot;, &quot;100030&quot;)<br />
        stpapi.put.field(&quot;tdpur4131s000&quot;, &quot;tdpur45.pono&quot;, &quot;10&quot;)<br />
        ret=stpapi.find(&quot;tdpur4131s000&quot;)<br />
        ret=stpapi.mark(&quot;tdpur4131s000&quot;)<br />
        stpapi.continue.process(&quot;tdpur4131s000&quot;, err)<br />
        if(strip$(err)&lt;&gt;&quot;&quot; and strip$(err)&lt;&gt;&quot;Process is gone&quot;) then<br />
                Message(&quot;process error = %s&quot;,err)<br />
        endif<br />
| end the subsession.      <br />
        stpapi.end.session(&quot;tdpur4131s000&quot;)<br />
<br />
<br />
I have a very strange behaviour. If I do it like this both mark and find functions return 1 which is ok. But when I go back to the main session I don't have any record in the multi-oco list. Now this happens when I use the orno and pono fields as the session index with ref 1. If I use other session indexes the above code works (when I go back to the main session I have multi-oco first line filled) but I don't get the correct record  (I always get the first record - I guess this is correct behaviour because the find function doesn't use the specified fields if I use other indexes).<br />
<br />
Is this normal? A bug with stpapi maybe?<br />
<br />
Thanks in advance,</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mark_h</div><div class="date">7th November 2002, 21:45</div></div><div class="posttext">I have not had this actual problem, but I have had instances where a sub-session gets activated with the incorrect record.  In these cases I was able to get around the problem by doing a find.  I have never had a main session return to the incorrect record.  It could be because of the indexes you mentioned. <br />
<br />
Sometime in the next couple of months I will be doing a Maintain Receipt FS.  At that time I may be more knowledgable about what happens with them. I have not had time to look at this yet.  I will try to keep this post in mind when I do the function server.<br />
<br />
Mark</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pedromrs</div><div class="date">7th November 2002, 22:06</div></div><div class="posttext">Mark,<br />
<br />
Thanks for the answer. Maybe I explained myself wrong here.<br />
When the correct index is specified my problem is not getting a record at all in the main session, the find function works ok because I did a get.field in the subsession after the find and the I get the correct data.<br />
I only get different records in the main session when I specify the pono and orno fields and change the index to something else but at least it returns some data :)<br />
<br />
I have seen several posts in this forum about type 3 forms and change.view. Maybe that is the problem? I only do a change.view to activate the subsession.<br />
<br />
Thanks :cool:</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lbencic</div><div class="date">8th November 2002, 00:21</div></div><div class="posttext">After doing a change view, you should then do a find.  Also, as you have read then, the find is not always reliable.  If the find is not working, but your change view is, try using the browse.set commands with the get.field's to determine the correct current record, then even the 'mark' command to mark the record before 'continue'.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pedromrs</div><div class="date">8th November 2002, 10:45</div></div><div class="posttext">Hi all,<br />
<br />
I did a stupid mistake. :rolleyes: <br />
The fields are not tdpur45.* but tdpur045.*. Nevertheless the OLE problem still remains but I can live with it since I have found the Baan DLL to be much faster.<br />
So if anyone needs it the code that works is:<br />
<br />
<br />
| Preparar para a subsessao	<br />
	stpapi.handle.subproc( &quot;tdpur4120m000&quot;, &quot;tdpur4131s000&quot;, &quot;add&quot;)<br />
| Activa a subsessao de escolha por fornecedor<br />
	ret = stpapi.change.view(&quot;tdpur4120m000&quot;)		<br />
	<br />
	stpapi.put.field(&quot;tdpur4131s000&quot;, &quot;tdpur045.orno&quot;, &quot;100030&quot;)<br />
	stpapi.put.field(&quot;tdpur4131s000&quot;, &quot;tdpur045.pono&quot;, &quot;10&quot;)	<br />
	ret=stpapi.find(&quot;tdpur4131s000&quot;) <br />
        ret=stpapi.mark(&quot;tdpur4131s000&quot;)<br />
                <br />
        stpapi.continue.process(&quot;tdpur4131s000&quot;, err)        <br />
	if (strip$(err) &lt;&gt; &quot;&quot; and strip$(err)&lt;&gt; &quot;Process is gone&quot;) then<br />
		Message(&quot; Erro na subs. tdpur4131s000  = %s&quot;,err)<br />
	endif	<br />
| Desligar a subsessao	<br />
        stpapi.end.session(&quot;tdpur4131s000&quot;) <br />
<br />
<br />
Now I will continue the rest of the fields and lot subsession. I will post more code later if it works.<br />
Thanks for all the help,</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dnnslbrwn</div><div class="date">10th September 2003, 23:19</div></div><div class="posttext">I have had luck with AFS for other sessions, but the sub-session that is activated from Maintain Receipts (when ILC is active) gets activated when you 'tab off' of the Rec. Date field but I am having difficulty with it.<br />
<br />
I have gotten the main session to delete a PO line from a receipt number as a test so I know AFS is talking to tdpur4120m000.<br />
<br />
When I run the following code, it freezes at the line highlighted with ***** (in the debugger, control is never returned)<br />
<br />
<br />
	pur4120 = &quot;tdpur4120m000&quot;<br />
	ilc4113 = &quot;tdilc4113s000&quot;<br />
<br />
	stpapi.put.field(pur4120, &quot;tdpur045.reno&quot;, &quot;1550&quot;) <br />
	stpapi.put.field(pur4120, &quot;tdpur045.orno&quot;, &quot;110424&quot;) <br />
	stpapi.put.field(pur4120, &quot;tdpur045.pono&quot;, &quot;12&quot;) <br />
	e = stpapi.find(pur4120, error.message) <br />
	if e &lt;&gt; 1 then<br />
		|* Receipt not found!?!<br />
	else<br />
		stpapi.handle.subproc(pur4120, ilc4113, &quot;add&quot;)<br />
<br />
		stpapi.put.field(pur4120, &quot;tdpur045.diqu&quot;, &quot;20&quot;)<br />
		stpapi.put.field(pur4120, &quot;tdpur045.date&quot;, str$(date.num()))<br />
<br />
<br />
		stpapi.put.field(ilc4113, &quot;tdilc402.clot&quot;, &quot;5111&quot;)   ******<br />
		stpapi.put.field(ilc4113, &quot;tdilc402.date&quot;, str$(date.num())) <br />
		stpapi.put.field(ilc4113, &quot;tdilc402.stun&quot;, &quot;ea&quot;)<br />
		stpapi.put.field(ilc4113, &quot;tdilc402.qstr&quot;, &quot;20&quot;)<br />
<br />
		e = stpapi.save(ilc4113, error.message) <br />
		if e &lt;&gt; 1 then<br />
			e = stpapi.recover(ilc4113, recover.message)<br />
		endif<br />
		stpapi.end.session(ilc4113)<br />
	endif<br />
	stpapi.end.session(pur4120)<br />
<br />
<br />
<br />
In order to make my life easier (I read all of the previous post regarding difficulty with the other sub-session for selecting order lines) I have gone a different route and just created the new record in tdpur045 with the receipt #, packing slip number and new sequence number.  This has worked for me in the past for other receiving issues.<br />
<br />
So the above code is entering the session, then looking for the pre-entered receipt number, PO and POL.  Then I enter the packing slip quantity and the receipt date but I can not seem to get the ILC subsession to &quot;pop&quot; up so that I can maintain data within it.  <br />
<br />
In many of the previous posts, there is a reference to the use of stp.change.view().  Even though this did not make sense, I tried it with no luck.<br />
<br />
Mark... did you ever get around to automating this session as you mentioned above?<br />
<br />
Cheers,<br />
<br />
-Dennis<br />
<br />
PS: If this should have been a new post, my appologies.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mark_h</div><div class="date">11th September 2003, 00:01</div></div><div class="posttext">Here is the code to modify a receipt.  I have not tested it in our 4c4 version.<br />
<br />
<br />
Mark<br />
<br />
function extern modify_receipt(	domain	tcrcno		receipt.number,<br />
				domain  tcorno		purchase.order,<br />
				domain	tcpono  	purchase.line,<br />
				domain	tcqiv1		packingslip.qty,<br />
				domain	tcqiv1		received.qty,<br />
				domain	tcdate		received.date,<br />
				domain	tdltc.clot	purchase.lot,<br />
				domain	tcdate		purchaselot.date,<br />
				ref     string          msg())<br />
{<br />
		long	rc, cnt<br />
		string	dummy(6)<br />
	domain	tcorno	get.orno<br />
	domain	tcpono	get.pono<br />
 	stpapi.put.field(&quot;tdpur4120m000&quot;,&quot;tdpur045.reno&quot;,str$(receipt.number))<br />
  	stpapi.put.field(&quot;tdpur4120m000&quot;,&quot;tdpur045.orno&quot;,str$(purchase.order))<br />
 	stpapi.put.field(&quot;tdpur4120m000&quot;,&quot;tdpur045.pono&quot;,str$(purchase.line))<br />
	rc = stpapi.find(&quot;tdpur4120m000&quot;,msg)<br />
	if not isspace(msg) or rc&lt;&gt;1 then<br />
		stpapi.end.session(&quot;tdpur4120m000&quot;)<br />
		return<br />
	endif<br />
	stpapi.get.field(&quot;tdpur4120m000&quot;,&quot;tdpur045.orno&quot;,dummy)<br />
	get.orno = val(dummy)<br />
	stpapi.get.field(&quot;tdpur4120m000&quot;,&quot;tdpur045.pono&quot;,dummy)<br />
	get.pono = val(dummy)<br />
	cnt = 1<br />
 	while get.orno&lt;&gt;purchase.order and get.pono&lt;&gt;purchase.line and cnt&lt;10<br />
 		stpapi.get.field(&quot;tdpur4120m000&quot;,&quot;tdpur045.orno&quot;,dummy)<br />
 		get.orno = val(dummy)<br />
 		stpapi.get.field(&quot;tdpur4120m000&quot;,&quot;tdpur045.pono&quot;,dummy)<br />
 		get.pono = val(dummy)<br />
		cnt = cnt + 1<br />
 	endwhile<br />
| Prepare to handle lot controlled items.	<br />
	if not isspace(purchase.lot) then<br />
		stpapi.handle.subproc(&quot;tdpur4120m000&quot;,&quot;tdilc4113s000&quot;,&quot;add&quot;)<br />
	endif<br />
	<br />
	stpapi.put.field(&quot;tdpur4120m000&quot;,&quot;tdpur045.diqu&quot;,str$(packingslip.qty))<br />
	stpapi.put.field(&quot;tdpur4120m000&quot;,&quot;tdpur045.date&quot;,str$(received.date))<br />
	stpapi.put.field(&quot;tdpur4120m000&quot;,&quot;tdpur045.dqua&quot;,str$(received.qty))<br />
	stpapi.update(&quot;tdpur4120m000&quot;,1,msg)<br />
	if not isspace(msg) or rc&lt;&gt;1 then<br />
		if not isspace(purchase.lot) then<br />
			stpapi.end.session(&quot;tdilc4113s000&quot;)<br />
		endif<br />
		stpapi.end.session(&quot;tdpur4120m000&quot;)<br />
		return<br />
	endif<br />
	<br />
	if not isspace(purchase.lot) then<br />
		stpapi.put.field(&quot;tdilc4113s000&quot;, &quot;tdilc402.clot&quot;,purchase.lot)<br />
		stpapi.put.field(&quot;tdilc4113s000&quot;, &quot;tdilc402.date&quot;,str$(purchaselot.date))<br />
		stpapi.put.field(&quot;tdilc4113s000&quot;, &quot;tdilc402.qstr&quot;,str$(received.qty))<br />
		stpapi.put.field(&quot;tdilc4113s000&quot;, &quot;tdilc402.qstc&quot;,str$(received.qty))<br />
		stpapi.insert(&quot;tdilc4113s000&quot;,1,msg)<br />
		stpapi.get.mess.code(&quot;tdpur9401m000&quot;,msg)<br />
		stpapi.end.session(&quot;tdilc4113s000&quot;)<br />
	endif<br />
 	stpapi.end.session(&quot;tdpur4120m000&quot;)<br />
}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lbencic</div><div class="date">11th September 2003, 01:28</div></div><div class="posttext">Also note if you are doing a supply chain receipt - they fall through much the same, but that second session is then tdilc4114s000.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dnnslbrwn</div><div class="date">11th September 2003, 17:37</div></div><div class="posttext">First off - thank you Mark for you quick response.   ... and thank you Ibencic, but no we are not supply chain.<br />
<br />
I have changed my code in many different ways (including an almost exact match to Mark's above) with no luck.  <br />
<br />
The following is the end of the AFSLOG file that is created when debugging:<br />
16&lt;-def.find01<br />
&lt;tdpur4120m000 record found (1)<br />
&gt;tdpur4120m000 handle.subproc tdilc4113s000 add<br />
&gt;tdpur4120m000 put.field:tdpur045.diqu 20<br />
&gt;tdpur4120m000 put.field:tdpur045.date 731469<br />
&gt;tdpur4120m000 put.field:tdpur045.dqua 20<br />
&gt;tdpur4120m000 update<br />
16-&gt;modify.set+save<br />
17&lt;-api.child.startedtdilc4113s00016<br />
17-&gt;get.fields<br />
16&lt;-modify.set+save0<br />
<br />
It seems that when the program requests the 'get.fields' on the subsession that is where it never comes back.  As one of the many tests, I ommited the handle.subproc and then just shut down the main session after the update and it shut down without a problem.  <br />
<br />
Are there variables that tdilc4113s000 expect to be set up that I would have to set up in my script?  I would assume that tdpur4120m000 would do all of that.  <br />
<br />
One thing that has got me thinking is that I can not start up the subsession from maintain sessions... I know it is a subsession an all, but it just freezes as opposed to starting up with no data like most subsessions.  Does anyone who has the code see any reason why this subsession is acting that way?  Can someone else just try to start tdilc4113s000 from Maintain Sessions to see if it freezes for you please?<br />
<br />
I appreciate all of your help... One thing that I should mention is that we are multi-currency and this particular session's PS has been pulled up to the MCR VRC.  I guess I should call BAAN and check that whatever they did for MCR did not break AFS.<br />
<br />
Cheers,<br />
<br />
-Dennis</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mark_h</div><div class="date">11th September 2003, 18:11</div></div><div class="posttext">Yes the tdilc4113s000 session locks up from maintain sessions.  I found this on the quick guide from baan:<br />
td	B40	c		ilcf4113s000	tdilc4113s000	115649	Maintain Receipts (ILC)<br />
td	B40L	c	bci0	ilcf4113s000	tdilc4113s000	103385	Maintain Receipts (ILC)<br />
<br />
The 115649 and 103385 are the solution numbers that Baan supports.  I am not sure if these should be installed at your site or not because of the multi-currency issue.  <br />
<br />
I also have not tested my API code on 4c4. Our users do not have access to that version yet.  I will try in the next week or so to get it move there so I can test it.<br />
<br />
Mark</div></div><hr />


<div class="post"><div class="posttop"><div class="username">FoxZapper</div><div class="date">22nd November 2003, 10:33</div></div><div class="posttext">Hi Dennis/Mark,<br />
<br />
Yes, the subsession tdilc4113s000 always freezes.<br />
<br />
I was trying to automate the Replenishment Receipts session (tdrpl0122m000). We have implemented ILC and as a result, the tdilc4113s000 session pops up.<br />
<br />
When I tried debugging it manually, I realized that the session requests for data from tdilc402 and at that moment tdilc402 has no record for that order. As a result, when we try to maintain any data, the session freezes. I am not sure if its data related, but if you go through the AFS guideand refer page 5-3 (Hidden Functionality) it causes more confusion.<br />
<br />
Dennis, I had the same problem with the Maintain Purchase Receipts program, but I avoided the popping up of tdilc4113s000 by modifying the Distribution Paramater:<br />
Maintain Receipts by Receipt/Order Number in tdpur4100m000<br />
and set it as &quot;By Order&quot; and I also ensured that the &quot;Storage Unit for Inbound Advice&quot;  in tdilc0100m000 is set to No.<br />
<br />
This allows me to maintain receipts by order number and does not pop up tdilc4113s000<br />
<br />
Drawbacks of this approach:<br />
1. This assumes that the inventory and storage units of the Item are the same<br />
2. Item is not Lot Controlled<br />
3. Outbound Priority of the item &lt;&gt; FIFO or LIFO (Outbound Priority = 'By Location')<br />
<br />
If someone has any answer regarding tdilc4113s000, please post your suggestions here.<br />
<br />
As I went through all the posts, I relaized that till now no one had been able to figure out a way to handle tdilc4113s000. Or am I wrong?<br />
<br />
Regards</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dnnslbrwn</div><div class="date">24th November 2003, 16:47</div></div><div class="posttext">My bad!  Got a solution from BAAN within a week of this post (one of those rare instances where the person they assign is the person who did the work that &quot;broke&quot; the session in the first place.  I put &quot;broke&quot; in quotes as he did what he was told by another department but he realized it would be confusing to us AFS folks).<br />
<br />
In your code define the variable boi.call as follows:<br />
<br />
<br />
	extern	domain	tcmcs.str132	boi.call<br />
<br />
<br />
and then fill it with:<br />
<br />
<br />
	boi.call = &quot;tdboidll0011.Create&quot;<br />
<br />
<br />
You can fill it right at the start of tdpur4120m00 - it does not seem to affect it in any adverse ways.<br />
<br />
Hope you have luck with this!<br />
<br />
Cheers,<br />
<br />
-Dennis</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mark_h</div><div class="date">26th November 2003, 21:33</div></div><div class="posttext">Dennis,<br />
<br />
Just thought I would let you know that I developed my receiving program in 4c3 and tdilc4113s000 worked just fine without the BOI call.  We are converting to 4c4, the program was moved to this environment and worked.  We are going live on 4c4 this weekend, so the users decided to do some last minute testing on this program(which will not be part of the go live) and the session started hanging on lot controlled parts.  We must have installed a solution that changed something. Anyway, I remembered this post and used what you posted.  It now works again.<br />
<br />
Thanks!<br />
<br />
Mark</div></div><hr />


<div class="post"><div class="posttop"><div class="username">FoxZapper</div><div class="date">3rd December 2003, 16:01</div></div><div class="posttext">Hi Mark/Dennis,<br />
<br />
The tdilc4113s000 session hangs when I am using it with Maintain Replenishment Order Receipts-tdrpl0122m000<br />
<br />
Did you ever encounter this?<br />
Dennis, I tried assigning the boi.call = &quot;tdboidll0011.Create&quot;<br />
But, it still does not work.<br />
<br />
Any thoughts?<br />
<br />
Regards,</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dnnslbrwn</div><div class="date">3rd December 2003, 16:36</div></div><div class="posttext">FoxZapper,<br />
<br />
First I would check to see if the variable boi.call fixes you purchase receipts to see if it is doing anything - maybe you have an old object that does not even know about boi.call yet?  <br />
<br />
From what I understand, not only tdilc4113s000 must work with the variable boi.call, but also the calling program must  import(&quot;boi.call&quot;, boi.call) as well.  In my case this was tdpur4120m000 so I really don't know if tdrpl0122m000 also has this import command.  <br />
<br />
If it does work with the purchase session, then my next step would be to submit a call with BAAN.  I am embarassed to say that I was amazed that once they got back to me, I had my answer within a few days... I was very worried that this was one of those problems that would never get an answer when I submitted it. <br />
<br />
If the purchase AFS does not work as well... then I would check to make sure  you have the most recent objects<br />
<br />
Cheers,<br />
<br />
-Dennis<br />
<br />
PS: Just making sure, but you did define boi.call as extern right?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">FoxZapper</div><div class="date">4th December 2003, 07:47</div></div><div class="posttext">Hi Dennis,<br />
<br />
Thanks for your response. (And please call me Arun)<br />
tdpur4120m000 works fine because I ensured that tdilc4113s000 does not pop up (by modifying Purchase Parameters)<br />
<br />
Yes, I have declared the variable as an extern.<br />
<br />
And I believe we have the latest object since we recently installed BaaN IV c4's Service Pack 12<br />
<br />
The oboidll0011 object in td (Standard) is dated 26th November 2003<br />
<br />
<br />
Here is my script:<br />
<br />
<br />
function maintain.replenishment.order.receipts.in.baan()<br />
{<br />
|* This function imports the replenishment receipts<br />
long	ret.val1, ret.val2, ret.val3, ret.val4<br />
string  errs(256)   | Error returned by AFS<br />
domain	tcorno	order.number.get.next<br />
domain	tcpono	position.number.get.next<br />
<br />
|* Fields required per line<br />
domain  tcsrnb  srnb  | Delivery number<br />
<br />
	order.number.get.next = val(order.no.str)<br />
	position.number.get.next = val(order.line.str)<br />
<br />
<br />
	|* Determine the delivery number for this receipt<br />
	select  tdrpl100.orno, tdrpl100.pono, tdrpl100.srnb<br />
	from    tdrpl100<br />
	where   tdrpl100._index1 = {:order.number.get.next, :position.number.get.next}<br />
	order by tdrpl100._index1 desc<br />
	as set with 1 rows<br />
	selectdo<br />
		srnb = tdrpl100.srnb<br />
	selectempty<br />
		err.mesg = &quot;Order - (&quot; &amp; order.no.str &amp; &quot;)  does not exist&quot;<br />
		create.err.file()<br />
	endselect<br />
<br />
	|* Call the session tdrpl0122m000, and locate the order<br />
	stpapi.put.field(&quot;tdrpl0122m000&quot;, &quot;tdrpl100.orno&quot;, order.no.str)<br />
	<br />
	ret.val1 = stpapi.change.view(&quot;tdrpl0122m000&quot;, errs)<br />
	if ret.val1 = 1 then<br />
		stpapi.put.field(&quot;tdrpl0122m000&quot;, &quot;tdrpl100.pono&quot;, order.line.str)<br />
		stpapi.put.field(&quot;tdrpl0122m000&quot;, &quot;tdrpl100.srnb&quot;, str$(srnb))<br />
		ret.val2 = stpapi.find(&quot;tdrpl0122m000&quot;, errs)<br />
		if ret.val2 = 1 then<br />
			|* Enter the date and quantity<br />
			stpapi.put.field(&quot;tdrpl0122m000&quot;, &quot;tdrpl100.rrdt&quot;, str$(date.num()))<br />
			stpapi.put.field(&quot;tdrpl0122m000&quot;, &quot;tdrpl100.pqua&quot;, quantity.str)<br />
			<br />
			stpapi.handle.subproc(&quot;tdrpl0122m000&quot;, &quot;tdilc4113s000&quot;, &quot;add&quot;)<br />
			boi.call = &quot;tdboidll0011.Create&quot;<br />
<br />
			|* Function to get sera and serb<br />
			get.next.sequence.number.for.replenishment.sera.serb.from.tdilc402()<br />
			<br />
			stpapi.put.field(&quot;tdilc4113s000&quot;, &quot;tdilc402.orno&quot;, order.no.str)<br />
			stpapi.put.field(&quot;tdilc4113s000&quot;, &quot;tdilc402.pono&quot;, order.line.str)<br />
			stpapi.put.field(&quot;tdilc4113s000&quot;, &quot;tdilc402.sera&quot;, sera.str)<br />
			stpapi.put.field(&quot;tdilc4113s000&quot;, &quot;tdilc402.serb&quot;, serb.str)<br />
			stpapi.put.field(&quot;tdilc4113s000&quot;, &quot;tdilc402.item&quot;, item.no.str)<br />
			stpapi.put.field(&quot;tdilc4113s000&quot;, &quot;tdilc402.stun&quot;, unit.str)<br />
			stpapi.put.field(&quot;tdilc4113s000&quot;, &quot;tdilc402.qstc&quot;, quantity.str)<br />
			stpapi.put.field(&quot;tdilc4113s000&quot;, &quot;tdilc402.qstr&quot;, quantity.str)<br />
			<br />
			ret.val3 = stpapi.insert(&quot;tdilc4113s000&quot;, true, err.mesg)<br />
			|* Could try a Save?<br />
<br />
			if ret.val3 &lt;&gt; 1 then<br />
			|* If error, then recover the session<br />
				ret.val4 = stpapi.recover(&quot;tdilc4113s000&quot;, errs)<br />
				create.err.file()<br />
			else<br />
				success.rec = success.rec + 1<br />
				first.time = false<br />
			endif	<br />
		else<br />
			err.mesg = &quot;Order-(&quot; &amp; order.no.str &amp; &quot;) Line-(&quot; &amp; order.line.str &amp; &quot;) could not be opened&quot;<br />
			create.err.file()<br />
		endif<br />
	else<br />
		err.mesg = &quot;Order - (&quot; &amp; order.no.str &amp; &quot;)  could not be opened&quot;<br />
		create.err.file()<br />
	endif<br />
	stpapi.end.session(&quot;tdilc4113s000&quot;, errs)<br />
	stpapi.end.session(&quot;tdrpl0122m000&quot;, errs)<br />
}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mark_h</div><div class="date">4th December 2003, 16:34</div></div><div class="posttext">I do believe there is a later version of tdilc4113s000.  We received a version with SP 13 - at least that is what the PMC Report is saying.  My original 4C4 code worked, a patch was installed , then it stopped working, that was when I added the BOI call.<br />
<br />
What in your code activates the 4113 session? Just curious because I do not see a continue,insert, or anything before you start inserting into the 4113s000 session.<br />
<br />
Mark</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Al Smith</div><div class="date">4th December 2003, 21:46</div></div><div class="posttext">Hi,<br />
<br />
Although I'm using OLE to receive replenishment orders, I believe the following sequence will work for you. <br />
<br />
I do the 3 puts (&quot;tdrpl0122m000&quot;, &quot;tdrpl100.orno&quot;, ...pono, ...srnb) then do the &quot;find&quot;.<br />
Then put (&quot;tdrpl0122m000&quot;, &quot;tdrpl100.rrdt&quot;). I don't put the quantity as this is entered in the subsession.<br />
Here's where we differ.<br />
Do an update to tdrpl0122m000.<br />
Subsession tdilc4113s000 should now be running.<br />
The only thing I put into tdilc4113s000 is tdilc402.qstr. The other fields seem to self-populate.<br />
Then I do the insert for tdilc4113s000.<br />
<br />
I hope this helps.<br />
Al.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">FoxZapper</div><div class="date">6th December 2003, 08:11</div></div><div class="posttext">Hi Mark/Al,<br />
<br />
First off, thanks for the help guys.<br />
<br />
First to answer Mark:<br />
We have installed SP-14<br />
1. The boi.call code for Replenishments is still a gray area, since we only have a solution for Purchase Receipts from BaaN. (It was posted by Dennis)<br />
2. The tdilc4113s000 session is activated the moment you navigate to the quantity field. No continue or update is required.<br />
I believe, you must have a code for tdpur4120m000 which activates tdilc4113s000. An activation is required for Purchase Receipts (I believe it is continue).<br />
<br />
Al:<br />
You da man!<br />
I applied your approach and the code works like a charm.<br />
What I can't understand is why do we need to update tdrpl0122m000? Al, I would like to know why you did this?<br />
<br />
Can someone (Mark/Dennis/Al/Nico) tell me what boi.call should be equal to?<br />
<br />
boi.call = &quot;tdboidll0011&quot;<br />
or<br />
boi.call = &quot;tdboidll0011.Create&quot;<br />
<br />
<br />
I have a case pending with BaaN, and if I get a solution for other sessions, I shall post them here.<br />
<br />
For anyone else who needs the working code for Replenishment Receipts with Location Control, here it is:<br />
<br />
Regards,<br />
<br />
Arun<br />
<br />
<br />
function maintain.replenishment.order.receipts.in.baan()<br />
{<br />
|* This function imports the replenishment receipts<br />
long	ret.val1, ret.val2, ret.val3, ret.val4, ret.val5<br />
string  errs(256)   | Error returned by AFS<br />
domain	tcorno	order.number.get.next<br />
domain	tcpono	position.number.get.next<br />
<br />
|* Fields required per line<br />
domain  tcsrnb  srnb  | Delivery number<br />
<br />
	order.number.get.next = val(order.no.str)<br />
	position.number.get.next = val(order.line.str)<br />
<br />
<br />
	|* Determine the delivery number for this receipt<br />
	select  tdrpl100.orno, tdrpl100.pono, tdrpl100.srnb<br />
	from    tdrpl100<br />
	where   tdrpl100._index1 = {:order.number.get.next, :position.number.get.next}<br />
	order by tdrpl100._index1 desc<br />
	as set with 1 rows<br />
	selectdo<br />
		srnb = tdrpl100.srnb<br />
	selectempty<br />
		err.mesg = &quot;Order - (&quot; &amp; order.no.str &amp; &quot;)  does not exist&quot;<br />
		create.err.file()<br />
	endselect<br />
<br />
	|* Call the session tdrpl0122m000, and locate the order<br />
	stpapi.put.field(&quot;tdrpl0122m000&quot;, &quot;tdrpl100.orno&quot;, order.no.str)<br />
	<br />
	ret.val1 = stpapi.change.view(&quot;tdrpl0122m000&quot;, errs)<br />
	if ret.val1 = 1 then<br />
		stpapi.put.field(&quot;tdrpl0122m000&quot;, &quot;tdrpl100.pono&quot;, order.line.str)<br />
		stpapi.put.field(&quot;tdrpl0122m000&quot;, &quot;tdrpl100.srnb&quot;, str$(srnb))<br />
		ret.val2 = stpapi.find(&quot;tdrpl0122m000&quot;, errs)<br />
		if ret.val2 = 1 then<br />
			|* Enter the date and quantity<br />
			stpapi.put.field(&quot;tdrpl0122m000&quot;, &quot;tdrpl100.rrdt&quot;, str$(date.num()))<br />
			stpapi.handle.subproc(&quot;tdrpl0122m000&quot;, &quot;tdilc4113s000&quot;, &quot;add&quot;)<br />
			ret.val4 = stpapi.update(&quot;tdrpl0122m000&quot;, true, err.mesg)<br />
			<br />
			if ret.val4 = 1 then<br />
				boi.call = &quot;tdboidll0011&quot;<br />
	<br />
				get.next.sequence.number.for.replenishment.sera.serb.from.tdilc402()<br />
				<br />
				stpapi.put.field(&quot;tdilc4113s000&quot;, &quot;tdilc402.orno&quot;, order.no.str)<br />
				stpapi.put.field(&quot;tdilc4113s000&quot;, &quot;tdilc402.pono&quot;, order.line.str)<br />
				stpapi.put.field(&quot;tdilc4113s000&quot;, &quot;tdilc402.sera&quot;, sera.str)<br />
				stpapi.put.field(&quot;tdilc4113s000&quot;, &quot;tdilc402.serb&quot;, serb.str)<br />
				stpapi.put.field(&quot;tdilc4113s000&quot;, &quot;tdilc402.item&quot;, item.no.str)<br />
				stpapi.put.field(&quot;tdilc4113s000&quot;, &quot;tdilc402.stun&quot;, unit.str)<br />
				stpapi.put.field(&quot;tdilc4113s000&quot;, &quot;tdilc402.qstc&quot;, quantity.str)<br />
				stpapi.put.field(&quot;tdilc4113s000&quot;, &quot;tdilc402.qstr&quot;, quantity.str)<br />
				<br />
				ret.val3 = stpapi.insert(&quot;tdilc4113s000&quot;, true, err.mesg)<br />
				if ret.val3 &lt;&gt; 1 then<br />
				|* If error, then recover the session<br />
					ret.val5 = stpapi.recover(&quot;tdilc4113s000&quot;, errs)<br />
					create.err.file()<br />
				else<br />
					success.rec = success.rec + 1<br />
					first.time = false<br />
				endif<br />
			else<br />
				create.err.file()<br />
			endif<br />
		else<br />
			err.mesg = &quot;Order-(&quot; &amp; order.no.str &amp; &quot;) Line-(&quot; &amp; order.line.str &amp; &quot;) could not be opened&quot;<br />
			create.err.file()<br />
		endif<br />
	else<br />
		err.mesg = &quot;Order - (&quot; &amp; order.no.str &amp; &quot;)  could not be opened&quot;<br />
		create.err.file()<br />
	endif<br />
	stpapi.end.session(&quot;tdilc4113s000&quot;, errs)<br />
	stpapi.end.session(&quot;tdrpl0122m000&quot;, errs)<br />
}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dnnslbrwn</div><div class="date">8th December 2003, 16:26</div></div><div class="posttext">Arun,<br />
<br />
From what I understand, boi.call is a variable that was added to help the OW folks make one session do different things when called from different places.  In a perfect world... we would not even need to know about it.  <br />
<br />
There are two answers to your question above as to how it should be set:<br />
<br />
1) From BAAN, it should be set: boi.call = &quot;tdboidll0011.Create&quot; <br />
<br />
2) Thinking that if your code is working, then however you set it is just fine!<br />
<br />
Cheers,<br />
<br />
-Dennis</div></div><hr />


<div class="post"><div class="posttop"><div class="username">FoxZapper</div><div class="date">9th December 2003, 15:56</div></div><div class="posttext">Dennis/Mark and others,<br />
<br />
Apparently, there is a whole list of many such boi.call string declarations that have to be declared before any AFS program is accessed. The one you(Dennis) mentioned is not available on BaaN Support.<br />
<br />
For instance, before inserting Sales Order Lines, you have to declare boi.call as &quot;tdboidll0005&quot;.<br />
<br />
This is what BaaN had to say about that:<br />
<br />
Some changes and improvements have been made to some standard scripts to resolve some issues related to the standard iBaan Domain Pack BOIs. This involved the introduction of the &quot;boi.call&quot; variable. This variable will be used going forward in conjunction with the &quot;api.mode&quot; variable to handle both AFS and BOI calls. This new variable will be supported going forward, and is a solution to the problem, not a workaround.<br />
<br />
<br />
I am trying to get such a list (if it exists!) from BaaN for us folks.<br />
Shall post it here as and when I get them.<br />
<br />
Regards,<br />
<br />
Arun</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pedromrs</div><div class="date">13th March 2004, 23:09</div></div><div class="posttext">Dennis,<br />
<br />
I know it as been a while since you posted it.<br />
But thanks for the solution with boi.call variable.<br />
We just moved some service packs up and it broke the receipts function server which  turns out to be one of the most important we have.<br />
<br />
I just used the boi.call and it worked :) <br />
<br />
Thanks.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dnnslbrwn</div><div class="date">15th March 2004, 16:18</div></div><div class="posttext">Glad this post was of assistance... it's what makes this board work so well... all of the active contributors! :) <br />
<br />
-Dennis</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dnnslbrwn</div><div class="date">27th August 2004, 22:09</div></div><div class="posttext">...<br />
<br />
I am trying to get such a list (if it exists!) from BaaN for us folks.<br />
Shall post it here as and when I get them.<br />
<br />
Regards,<br />
<br />
Arun<br />
<br />
Arun,<br />
<br />
Did you ever get this list?<br />
<br />
Cheers,<br />
<br />
-Dennis</div></div><hr />


<div class="post"><div class="posttop"><div class="username">FoxZapper</div><div class="date">29th August 2004, 16:20</div></div><div class="posttext">Dennis,<br />
<br />
You know what?<br />
I really tried...<br />
I think there is no clear answer at BaaN. Maybe they haven't documented it?<br />
<br />
Finally, I lost my patience.<br />
I will definitely put them here when I get them.<br />
<br />
Regards,<br />
<br />
Arun</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dnnslbrwn</div><div class="date">30th August 2004, 22:35</div></div><div class="posttext">Arun,<br />
<br />
Well, that's a shame.  I have run into another AFS issue and it looks mysterious enough that I think it is another variable issue.  <br />
<br />
I have a session that performs inventory adjustments that works fine when run normally but when it is run in a job, it just keeps coming back &quot;Process is gone&quot; where it would normally reply back with the fields I am filling.  From the text, it looks like everytime I issue an stpapi.put.field command it tries to start the session and aborts with the above error message.<br />
<br />
I have a case open, but things are not moving too fast.<br />
<br />
Cheers,<br />
<br />
-Dennis<br />
<br />
Code and log file<br />
        long    returnval<br />
        string  error.message(100)<br />
        string  recover.message(100)<br />
        string  ilc1120(13)<br />
        string  ilc1121(13)<br />
        string  hold.wrho(10)<br />
        string  hold.cuni(3)<br />
<br />
        ilc1120 = &quot;tdilc1120m000&quot;<br />
        ilc1121 = &quot;tdilc1121s000&quot;<br />
        returnval = 0<br />
        error.message = &quot;&quot;<br />
        recover.message = &quot;&quot;<br />
<br />
        stpapi.put.field(ilc1120, &quot;tdinv100.cprj&quot;, &quot;&quot;)<br />
        stpapi.put.field(ilc1120, &quot;tdinv100.item&quot;, i.item)<br />
        stpapi.put.field(ilc1120, &quot;tdinv100.cwar&quot;, i.cwar)<br />
        stpapi.put.field(ilc1120, &quot;tdinv100.idat&quot;, str$(date.num()))<br />
        stpapi.put.field(ilc1120, &quot;tdinv100.kowt&quot;,<br />
                                   str$(etol(tckowt.stc.correction)))<br />
        stpapi.put.field(ilc1120, &quot;tdinv100.recd&quot;, i.recd)<br />
        stpapi.put.field(ilc1120, &quot;tdinv100.odat&quot;, str$(i.date))<br />
        stpapi.put.field(ilc1120, &quot;tdinv100.pdat&quot;, str$(i.date))<br />
        stpapi.put.field(ilc1120, &quot;tdinv100.trdt&quot;, str$(i.date))<br />
        stpapi.put.field(ilc1120, &quot;tdinv100.pqan&quot;, str$(i.pqan))<br />
<br />
        if not stpapi.insert(ilc1120, true, error.message) then<br />
                do.error(i.msgn, i.ftyp, i.seqn, returnval,<br />
                        &quot;API:&quot; &amp; error.message)<br />
                stpapi.recover(ilc1120, recover.message)<br />
                if strip$(recover.message) &lt;&gt; &quot;&quot; then<br />
                        do.error(i.msgn, i.ftyp, i.seqn, returnval,<br />
                                &quot;API:&quot; &amp; recover.message)<br />
                endif<br />
        else<br />
                .....<br />
LOGGING STARTED<br />
08-23-2004<br />
47-&gt;get.fields<br />
47&lt;-exit.child<br />
47&lt;-^AProcess is gone<br />
48-&gt;get.fields<br />
48&lt;-exit.child<br />
48&lt;-^AProcess is gone<br />
49-&gt;get.fields<br />
49&lt;-exit.child<br />
49&lt;-^AProcess is gone<br />
50-&gt;get.fields<br />
50&lt;-exit.child<br />
50&lt;-^AProcess is gone<br />
51-&gt;get.fields<br />
51&lt;-exit.child<br />
51&lt;-^AProcess is gone<br />
52-&gt;get.fields<br />
52&lt;-exit.child<br />
52&lt;-^AProcess is gone<br />
53-&gt;get.fields<br />
53&lt;-exit.child<br />
53&lt;-^AProcess is gone<br />
54-&gt;get.fields<br />
54&lt;-exit.child<br />
54&lt;-^AProcess is gone<br />
55-&gt;get.fields<br />
55&lt;-exit.child<br />
55&lt;-^AProcess is gone<br />
56-&gt;get.fields<br />
56&lt;-exit.child<br />
56&lt;-^AProcess is gone<br />
&gt;tdilc1120m000 insert<br />
&gt;tdilc1120m000 recover<br />
&gt;tdilc1120m000 end.session</div></div><hr />


<div class="post"><div class="posttop"><div class="username">lbencic</div><div class="date">30th August 2004, 23:22</div></div><div class="posttext">Lots of things can kill the api's, but one biggie is the execute(end.program) in the session you are trying to execute.  <br />
<br />
In tdilc1120, they have 2 of them, both in the before program section.<br />
<br />
1.  If the company does not have ILC turned on.  I am assuming since this runs normal this can't be the case.<br />
<br />
2.  If the user does not have permission (Maintain User Authorizations for Inventory Transactions) it will call the end.program.  They put a patch for this not to call the end program if they are in api.mode.  That's in the solution:  SOL 114964<br />
<br />
Is you're tdilc1120 program fairly current?  You can check for that solution, (if you run ttstpsessinfo, it's in there as that number).  It's dated 2001 though, so probably have it.  But if not, maybe your job user is not authorized to run this, it would cause such a problem.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dnnslbrwn</div><div class="date">31st August 2004, 00:02</div></div><div class="posttext">Lisa,<br />
<br />
:eek:  Wow... I used to live in a world with source but that was in a previous life as a consultant and I forget how simple a solution can be if you can see what is happening.  Thanks for the pointer!<br />
<br />
The job user had been removed from the authorization list for inventory transactions in this company and this explains why it used to work in the job but started not working about 2 months ago... <br />
<br />
The fact that it had just stopped working (with no patches during the suspect time) was so strange, that I was questioning my memory that it had ever worked in the job and had almost convinced myself that it maybe had never worked in the job. <br />
<br />
Thanks again,<br />
<br />
-Dennis<br />
<br />
PS: Just did a bic_info on tdilc1120 and I don't have that patch - but we are on MCR so we sometimes don't get all of the patches in our VRC - I KNOW that we have received a PMC of this session since 2001!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mark_h</div><div class="date">16th April 2005, 00:37</div></div><div class="posttext">Just thought I would let you all know that my receiving program stopped working for the latest service pack.  I was lucky in the fact that I could set a new variable called g.sub.session to true.  This allowed the program to activate the tdilc4113s000 session. So far it looks like it solved the problem - I also found several more boi.call type things to set.  I do not think my fix should be required and will place a call with Baan.  In the mean time I will leave this in place.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dnnslbrwn</div><div class="date">21st June 2005, 23:55</div></div><div class="posttext">Mark,<br />
<br />
We just installed a bunch of patches (maybe it was a service pack - I don't look after these things) and my receiving is not working anymore.<br />
<br />
I added a long called g.sub.session as you suggested and set it &quot;= TRUE&quot; and it still hangs.<br />
<br />
Any more info?<br />
<br />
Cheers,<br />
<br />
-Dennis</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mark_h</div><div class="date">22nd June 2005, 00:19</div></div><div class="posttext">Which part hangs?  Where it activates tdilc4113s000?  Do you have boi.call set?  You may have to set it to boi.call  = &quot;tdboidll500015.Create&quot; or &quot;tdboidll0011.Create&quot;.  I can not really know with out looking at the source for the session.  You may want to ask Baan for the current source to see why it does not work and to report this is not working in api.mode.  It looks like they used a lot of &quot;if api.mode then&quot; for this wms integration which causes problems for the normal api sessions.<br />
<br />
I know there are newer patches than the service pack 18 patches that we installed.  I had to make several changes to get the approvals piece working again.  I have not tried my code on the most current patches(Service Pack 19).  I do know they attempted to integrate that WMS stuff through out the code.  It is causing me tons of problems.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dnnslbrwn</div><div class="date">22nd June 2005, 00:40</div></div><div class="posttext">Mark,<br />
<br />
From the PMC sessions, this session has been hit hard (dozens of updates all loaded just this morning) with WMS modifications.  We don't have the source so, I can't see what they have done.<br />
<br />
The session hangs when I try to push the first variable to the sub-session - I do the update in tdpur4120m000 and the log shows the session responding, but when I put.field the first fields of tdilc4113s000, the get.field does not get returned and at that point, the session (and log) just hangs.<br />
<br />
I have the boi.call = &quot;tdboidll0011.Create&quot; - what is the other setting for?  Just something else you have found to work?<br />
<br />
-Dennis</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mark_h</div><div class="date">22nd June 2005, 15:38</div></div><div class="posttext">Yes it was something I found prior to the current release.  A snippet of the code from what may(I do not know if the code matches our object) be our current session is:<br />
<br />
	if ((boi.call &lt;&gt; &quot;tdboidll500015.Create&quot;    ) or<br />
	    (boi.call  = &quot;tdboidll500015.Create&quot; and<br />
	     g.sub.session			    )	) then<br />
								|#148648.en<br />
		zoom.to.arrivals.in.ilc()<br />
 		refresh.curr.occ()<br />
	endif<br />
<br />
No telling what you code may contain.  You may want to ask baan for the source code.  It took a lot of looking to see what I had to do to get it to work.  Are you able to actually control tdilc4113s000?  Like when it starts from tdpur4120m000 can you end the session?  It took me several days to figure out the approvals session.  Do you have access to a wrapper program(RMCgen, Qkey)?  I used this to figure out how to get the maintain approvals done.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dnnslbrwn</div><div class="date">22nd June 2005, 16:35</div></div><div class="posttext">Mark,<br />
<br />
With all of the patches we just installed, we don't have 148648! or at least PMC doesn't think we do.  I guess I will have to log a call with BAAN - we don't have source so getting them to let me take a pick is like pulling teeth, but we will see.  I don't believe that ilc4113 ever starts - in the log file, I can see the request to 'get fields' which then normally returns with a long string of fields that session uses.  In this case, it never comes back and that is very similar to when it broke long, long ago (I think at the start of this conversation :^).<br />
<br />
I do have the wrapper program that I got off this board, but I am relatively confident that my code is good - it used to work and the visible BAAN procedures/steps have not changed.  We don't use inspections and approvals here, the staff don't like how BAAN rejects material and how no history of the rejection is kept.<br />
<br />
Thanks for the thoughts,<br />
<br />
-Dennis</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mark_h</div><div class="date">22nd June 2005, 17:12</div></div><div class="posttext">Not sure but patch 148648 could be an A&amp;D patch. I will send you a PM.<br />
<br />
We use the Tip/QA package with Baan, but we have even automated it.  For source inspection and such.  Pretty cool when the Baan piece works.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">dnnslbrwn</div><div class="date">1st August 2005, 21:17</div></div><div class="posttext">So, with BAAN's help, we ran the session in debug mode using the latest and greatest objects and everything worked.  So... while we had just installed over 1K patches, we have to install more to get the receiving session up to current.  <br />
<br />
You feel a bit stupid when the answer really is ... &quot;are your patches up to date?&quot;</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mark_h</div><div class="date">1st August 2005, 21:29</div></div><div class="posttext">Yep - we ran into the same thing while testing our last service pack.  I know our last couple of fixes have been outside PMC control - we did not want to have to test 20 pages of objects when only one was causing the problem.  Maybe I should change my mantra to include - &quot;Contact Baan to really and truly find out the answer&quot;.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Paul P</div><div class="date">1st September 2006, 09:43</div></div><div class="posttext">While making my API script for Maintain Receipts fool-proof (please refer to Making API for Maintain Receipts (tdpur4120m000) fool-proof), I found out that you don't have to call stpapi.continue.process(&quot;tdilc4131s000&quot;,APIErrMsg) there at all. If you must, you'll be better off sending stpapi.update() to that subsession. But, actually, the only command you need to send to that subsession is the stpapi.end.session(). This is because all the actions of that tdpur4131s000 happens in choice.update.db, and choice.end.program actually calls choice.update.db too.<br />
Just a tip for those who would like to save several miliseconds when his/her code runs.<br />
<br />
Rgds,<br />
Paul</div></div><hr />



</div>
</body>
</html>