<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="keywords" content="How to prevent passing of hints generated by Oracle Driver ?, baan,baanerp,erp,forum,discussion,bulletin board" />
	<meta name="description" content="[Archive] How to prevent passing of hints generated by Oracle Driver ? Performance &amp; Tuning" />
	
	<title>How to prevent passing of hints generated by Oracle Driver ? [Archive]  - Baanboard.com</title>
	<link rel="stylesheet" type="text/css" href="../styles.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar"><a href="index.html">Newbaanboard</a> &gt; <a href="index.html">Baan SIGs</a> &gt; <a href="index.html">Performance &amp; Tuning</a> &gt; How to prevent passing of hints generated by Oracle Driver ?</div>
<hr />
<div class="pda"></div>

<hr />

<div class="post"><div class="posttop"><div class="username">baaniac</div><div class="date">22nd May 2002, 15:12</div></div><div class="posttext">Hi all,<br />
<br />
We are facing a typical problem with BaanERP 5.0b with Oracle 8.05 as the back-end.<br />
<br />
We have found that whenever any query is fired from a Standard Baan session to Oracle, it is sometimes getting wrong hints at Oracle side.<br />
<br />
E.g. - Our query at Baan level is as follows :-<br />
<br />
select tdsls401.orno, tdsls401.pono, tdsls401.srnb, tdsls401.cuno<br />
from   tdsls401<br />
where tdsls401._index1 = {:orno.f}<br />
order by tdsls401._index1<br />
<br />
If we run query this query in a Baan session, it gets hint as &quot;Full Scan&quot;.<br />
When we fire the same query at Oracle level, it gets hint as &quot;Index_Scan&quot;.<br />
<br />
And, it is resulting into drastic difference in performance.<br />
<br />
Likewise, the Baan session is running very slow.<br />
If we run the same query at Oracle level, it is nearly 8 times faster than that at Oracle level. !!!<br />
<br />
What might be the reason for this ? Is there any way at Baan end to prevent hints passed to Oracle ?<br />
<br />
Details of our system are as follows :-<br />
Server - HP<br />
Backend - Oracle 8.0.5<br />
BaanERP Version - 5.0b<br />
Porting Set - 6.2a.03.01<br />
OPTIMIZER_MODE at Oracle - CHOOSE<br />
Statistics Analyze - regularly, on a weekly basis.<br />
<br />
Thanks</div></div><hr />


<div class="post"><div class="posttop"><div class="username">thessdethall</div><div class="date">22nd May 2002, 18:29</div></div><div class="posttext">Hello,<br />
<br />
I have the same question about the optimizer_mode and the analyze command. <br />
<br />
If baan put hints on sql queries, i think that mean that Oracle do not use the statistics. So my question is should the database be analyzed if baan do not use statistics ?<br />
<br />
best regards</div></div><hr />


<div class="post"><div class="posttop"><div class="username">gguymer</div><div class="date">22nd May 2002, 19:07</div></div><div class="posttext">The Baan / Oracle driver translates the Baan SQL statements into their Oracle equivalent including hints that it then passes to Oracle to execute. The hints in the SQL statement cause the optimizer to behave in a somewhat predictable manner. The optimizer works off the statistics that are collected from the analyzed tables and indexes. If those statistics are not kept up to date, then the optimizer makes faulty decisions based those outdated statistics.  Both Oracle and the Baan have settings that can be modified to influence the behavior of either the driver and/or the optimizer. Whether the hints are there or not, bottom line is that the optimizer is being called.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">NPRao</div><div class="date">22nd May 2002, 19:44</div></div><div class="posttext">I am not aware if these options are allowed in the older BaaN versions, but we are on the BaaN-5.2 where you can use the &quot;hints&quot; in your SQL coding...<br />
<br />
Here is the info from the help manual -<br />
<br />
BaanERP Programmers Guide<br />
Hint types<br />
-------------------------------------------------------------------------------<br />
In the following subsections we describe each of the hint types:<br />
Index hint <br />
Ordered hint <br />
Buffer hint <br />
Array fetching hint <br />
Array size hint <br />
Row mode hint <br />
'No hints' hint <br />
String hint <br />
Related topics<br />
<br />
Index hint <br />
--------------------------------------------------------------------------------<br />
An index hint advises the query processor to scan a table with the specified index. For example:<br />
<br />
select bpid, nama<br />
from   tccom100<br />
where  bpid &gt; '  1000' and nama &gt;= 'Z'<br />
hint   use index 2 on tccom100<br />
<br />
This index hint suggests to the query processor to scan table tccom100 using index 2. Optionally, you can specify the mode, ascending or descending, of the index. For example:<br />
<br />
select bpid, nama<br />
from   tccom100<br />
where  bpid &gt; '  1000' and nama &gt;= 'Z'<br />
hint   use index 2 on tccom100 desc<br />
<br />
Table tccom100 must be accessed using index 2 in descending order. With one index hint you can hint more than 1 index for the table. There is a maximum of 10 indexes you can specify per index hint. If you specify more than one index hint the query processor may use one of these indexes to scan the table or it may use a combination of the indexes. Consider for example the following query:<br />
<br />
select  iscn, bpid<br />
from    tccom100<br />
where   (iscn = 570 or cadr = 'J10000001') and nama &gt;= 'A'<br />
hint    use index 1,2 on tccom100<br />
<br />
Assume index 1 is on column iscn and index 2 is on column cadr, furthermore assume there is an index 3 on column nama. By hinting on both index 1 and index 2 this query can be solved by firing two index scans.<br />
<br />
Index scan 1 on index 1:<br />
<br />
select  iscn, bpid<br />
from    tccom100<br />
where   iscn = 570 and nama &gt;= 'A'<br />
<br />
Index scan 2 on index 2:<br />
<br />
select  iscn, bpid<br />
from    tccom100<br />
where   cadr = 'J10000001' and nama &gt;= 'A'<br />
<br />
Performing these two index scans may be faster than executing one index scan on index 3.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">JamesV</div><div class="date">22nd May 2002, 23:28</div></div><div class="posttext">The ability to explicitly pass hints is part of the Baan 5.1/5.2 tool set.  You cannot do this at earlier versions.  <br />
<br />
You can change the optimizer behavior through a combination of changes to the query (if you have access for source code changes), optimizer codes in ora_storage, db_resource settings, etc.  but the result is difficult to predict without some testing.  <br />
<br />
You may also need to check your dbsinit to reduce the amount of strictness in the index selection.  This value should be set to 021 to reduce strictness.<br />
<br />
-- Jim</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Martin</div><div class="date">23rd May 2002, 10:01</div></div><div class="posttext">Hi,<br />
<br />
the problem, that you would read the table with a not full qualified index. Try the following sql-statement :<br />
select tdsls401.orno, tdsls401.pono, tdsls401.srnb, tdsls401.cuno <br />
from tdsls401 <br />
where tdsls401._index1 =inrange {:orno.f, 0 ,0}<br />
and {:orno, 99, 99} <br />
order by tdsls401._index1 <br />
Hope this helps.<br />
<br />
<br />
Martin</div></div><hr />


<div class="post"><div class="posttop"><div class="username">baaniac</div><div class="date">24th May 2002, 12:16</div></div><div class="posttext">Thanks everyone for your kind feedback.<br />
<br />
The problem has been identified with Baan source; which was wrongly coded. It had a cartesian (Cross) product of 2 tables; which caused wrong hints being passed to the Oracle.<br />
A solution is available on Support site for the problem.<br />
<br />
Thanks again and sorry for rather mis-leading everyone on the root cause of the problem.</div></div><hr />



</div>
</body>
</html>