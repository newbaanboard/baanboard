<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="keywords" content="current.mwindow(), baan,baanerp,erp,forum,discussion,bulletin board" />
	<meta name="description" content="[Archive] current.mwindow() Tools Development" />
	
	<title>current.mwindow() [Archive]  - Baanboard.com</title>
	<link rel="stylesheet" type="text/css" href="../styles.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar"><a href="../index.html">Newbaanboard</a> &gt; <a href="../index.html">Baan Quick Support: Functional &amp; Technical</a> &gt; <a href="../index.html">Tools Development</a> &gt; current.mwindow()</div>
<hr />
<div class="pda"></div>

<hr />

<div class="post"><div class="posttop"><div class="username">spartacus</div><div class="date">10th September 2009, 09:55</div></div><div class="posttext">Thanks this board I know the above function, and use it :-)<br />
<br />
But does anybody know where it is documented? I can't find it in any of my refernces, and also not in the &quot;undocumented functions&quot;-Thread here in the board. Where ist it?<br />
<br />
Thx</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bdittmar</div><div class="date">10th September 2009, 10:48</div></div><div class="posttext">Thanks this board I know the above function, and use it :-)<br />
<br />
But does anybody know where it is documented? I can't find it in any of my refernces, and also not in the &quot;undocumented functions&quot;-Thread here in the board. Where ist it?<br />
<br />
Thx<br />
Richard<br />
<br />
Hello,<br />
<br />
BaanERP Programmers Guide<br />
<br />
 <br />
Processes, process groups, and main windows<br />
<br />
--------------------------------------------------------------------------------<br />
<br />
Processes<br />
A process consists of a program object, a date, and a state. A process that has been started can be in any one of the following states:<br />
<br />
Running. <br />
The process is in the running queue. It has been scheduled to run, or is ready to be scheduled. <br />
<br />
Blocking. <br />
The process is in the blocking queue. It is waiting for input.<br />
<br />
Sleeping. <br />
The process is in the sleeping queue. It has been suspended and requires an external action to wake it up again.<br />
<br />
Terminating. <br />
The process is in the terminating queue. It has ended but not all its resources have yet been removed.<br />
<br />
Each process stores information about the current main window, the current menu, and current character window. Other information about display objects is not directly available to it. <br />
<br />
Process groups<br />
A process group is a group of related, interdependent processes. One process is the group leader. Child processes are started by the leader or by one of its children. All processes belong to a process group. <br />
<br />
The following are some of the characteristics of process groups:<br />
<br />
Each process group has its own event queue. Events are sent to the process group, not to individual processes. <br />
When one process within a group starts a child process, the child process is automatically placed in the same process group as its parent. However, you can use the function set.pgrp() to place the process in a different process group. <br />
When a process is killed or ended, its parent is automatically awakened, unless the parent and child are in different groups. <br />
You use the grab.mwindow() function to set the process group to which a main window sends its events. After calling this function, all events that occur in the main window are sent to the specified process group. <br />
Main windows<br />
A main window acts as the frame window for both sessions and 3GL applications. It is used for starting processes and for creating graphical and character windows. It is not used directly for handling user input or displaying program output. Usually, a main window consists of a border, title bar, menu bar, status area, control menu box, sizing controls, and a work area. The objects used by an application for user interaction are created within the work area of a main window and are managed by that main window.<br />
<br />
Each process can have zero, one, or more main windows.<br />
<br />
Process groups and main windows<br />
Process groups and main windows are used:<br />
<br />
to ensure unambiguity of input focus <br />
to keep related processes dependent <br />
to enable parent and child processes to be independent of each other <br />
Unambiguity of input focus<br />
To ensure that there is never any ambiguity as to where the events generated by a particular window are sent, when you create a main window, you define a single process group to which that main window sends its events. You do this with the grab.mwindow() function. After calling this function for a main window, all events that occur in that window are sent to the specified process group. In principle, there is only one running process in a process group at any time; so the events are sent to that process.<br />
<br />
In principle, each process could have its own event queue. However, there are a number of situations where this would cause problems. For example:<br />
<br />
When the input focus is on an input field and the user zooms to another process to select a value. In this case, the parent process is moved to the sleeping queue and will be awakened when the child process ends. <br />
However, if the user types in the input field after the zoom process has started but before the zoom process has created its own windows, the characters typed are sent to the sleeping process and not to the zoom process for which they were intended. When the windows of the zoom process appear, the user must then restart the selection. However, when the zoom process exits, the characters sent to the parent process are displayed in the input field and not those entered in the zoom process. This is because, when awakened, the parent process finds those characters in its process queue. <br />
<br />
A similar problem can arise when a uses ends a number of nested processes by repeatedly pressing the EXIT key and also when processes are synchronized by using bucket functions. <br />
These problems are avoided by enabling related, interdependent processes to share the same process group (and so the same event queue).<br />
<br />
Keeping related processes dependent<br />
When a process is started by the functions activate(), act.and.sleep(), or wait.and.activate(), by default the new process inherits the process group and main window of its parent. The parent process is moved to the sleeping queue will be awakened automatically when the child process ends.<br />
<br />
The following diagram illustrates this.<br />
<br />
<br />
<br />
A process with the same ID as its process group is referred to as the group leader. For the group leader, the predefined variable background is set to FALSE, For child processes, this variable is set to TRUE. <br />
<br />
A process group keeps track of the number of processes that belong to it. When no processes remain in the group, the group is automatically destroyed. You can destroy all processes in a particular group simultaneously by calling kill.pgrp().<br />
<br />
Making related processes independent<br />
When a process starts a child process, by default the child process inherits the process group and main window of its parent, and the parent is suspended until the child exits. However, it is possible to create a new process group and main window for the child process and so keep the parent and child processes independent. The following diagram illustrates this.<br />
<br />
<br />
<br />
The code for disconnecting a child process from its parent can be included either in the parent process or in the child process. In the following example, it is included in the parent process.<br />
<br />
old.mwindow = current.mwindow()<br />
new.mwindow = create.mwindow( title, mode, flags)<br />
change.mwindow( new.mwindow )<br />
child.pid = act.and.sleep( program.name, arglist )<br />
if child.pid then<br />
        set.pgrp( child.pid, child.pid )<br />
        grab.mwidow( new.mwindow, child.pid )<br />
        reactivate( child.pid )<br />
endif<br />
change.mwindow ( old.mwindow )<br />
destroy.mwindow( new.mwindow )<br />
<br />
In this example, the parent process first creates a new main window for the child process. It then starts the child process and calls set.pgrp() to place the child process in a different process group. By specifying the same ID for the process and the process group in the set.pgrp() call, a new process group is automatically created with the same ID as the process. The process becomes the leader of the new process group. The parent process then calls grab.mwindow() to link the new process group to the new main window.<br />
<br />
In this example, it is important to start the child process with act.and.sleep() and to reactivate the process only after it has been placed in the new process group. If the process is started with activate(), and a context switch occurs immediately after the child process is started, then the process would be scheduled with the incorrect process group.<br />
<br />
Note that if a process is moved to another process group, it will be impossible to switch it back to the original group if that group is destroyed in the meantime.<br />
<br />
Related topics<br />
Multitasking and the GUI</div></div><hr />


<div class="post"><div class="posttop"><div class="username">spartacus</div><div class="date">10th September 2009, 12:43</div></div><div class="posttext">Hi Bernd!<br />
<br />
Great, I never used the &quot;Programmers Guide&quot; before. I normaly just use &quot;Programmers Manual&quot; and that &quot;ERP Tools Programmers Reference&quot;. In that docs I didn't found anything about &quot;mwindow's&quot;.<br />
Thanks once more for that hint.</div></div><hr />



</div>
</body>
</html>