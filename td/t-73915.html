<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="keywords" content="Read Audit File - aud.put.new.field.value, baan,baanerp,erp,forum,discussion,bulletin board" />
	<meta name="description" content="[Archive] Read Audit File - aud.put.new.field.value Tools Development" />
	
	<title>Read Audit File - aud.put.new.field.value [Archive]  - Baanboard.com</title>
	<link rel="stylesheet" type="text/css" href="../styles.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar"><a href="../index.html">Newbaanboard</a> &gt; <a href="../index.html">Baan Quick Support: Functional &amp; Technical</a> &gt; <a href="../index.html">Tools Development</a> &gt; Read Audit File - aud.put.new.field.value</div>
<hr />
<div class="pda"></div>

<hr />

<div class="post"><div class="posttop"><div class="username">andy2609</div><div class="date">29th June 2021, 17:33</div></div><div class="posttext">Hi. I have read other threads on here and still have an issue with function aud.put.new.field.value, which is not returning the field value of the audited field.<br />
<br />
I have uploaded a snippet of code. In this, when running in debug, I can see that action.status is &quot;Y&quot; and action.type is &quot;U&quot; (the record has been found in the audit files - it has been changed and it is an update type).<br />
<br />
In the variables passed to the function 'aud.put.new.field.value':<br />
- pid is a valid process ID<br />
- (field.value should be the value returned by the function - correct?)<br />
- selection.id = 1<br />
- field.id = 1<br />
- field.ids() array has values 1,2,3,14,5,6,7,8<br />
- element is a long with value zero - and I'm unsure about its function - is this a returned value?<br />
<br />
The function returns a blank value to 'field.value', which is not was I was expecting.  I am clearly using this function incorrectly - can anyone please enlighten me?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">andy2609</div><div class="date">29th June 2021, 17:39</div></div><div class="posttext">I have updated the code extract to include the whole process.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mark_h</div><div class="date">30th June 2021, 00:09</div></div><div class="posttext">Well see if the http://www.baanboard.com/programmers_manual_baanerp_help_functions_audtr_aud_put_old_field_value manual or example helps.  This is way out of my league.  Other than that wait for someone who understands these aud commands.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">andy2609</div><div class="date">30th June 2021, 16:42</div></div><div class="posttext">Thanks again for your response Mark.<br />
<br />
Yes, I initiated the method of developing this script by referencing the manual and examples.  By all accounts, the functions to retrieve the old and new values from audit files should work - but they just don't.  It's not possible to debug any deeper either, of course, without access to Tools source code, so I can't see what's going on in the function...<br />
<br />
It's disconcerting that an existing thread posted in 2012 had this exact issue and has had no responses to date:<br />
http://www.baanboard.com/baanboard/showthread.php?t=63208<br />
<br />
The function is as follows:<br />
aud.put.new.field.value(<br />
pid,			|Current Process ID<br />
field.value,	|Audit file return vale<br />
selection.id,	|Selection ID returned by 'aud.select.transactions'<br />
table.id,		|Table ID returned by 'aud.get.next.action'<br />
field.ids(fldno),|The ID of the field returned by 'aud.get.field.ids'<br />
element)		|???<br />
<br />
By my reckoning, it is 'field.value' that should contain the returned value.  In the Programmer's Manual, element is described as:<br />
<br />
&quot;The value requested.<br />
For function aud.put.old.field.value this is the value of the field directly before the database action ('before image')<br />
For function aud.put.new.field.value this is the value of the field directly after the database action ('after image')&quot;<br />
<br />
It's a long, but I just don't know what is supposed to be passed to this variable (I have tried longs of multiple values).  (I have also experimented with the 'endian' variable.)<br />
<br />
Doesn't seem as though there is an answer to this.  I'm wondering if, as I'm using Baan Vb, it might not be fully supported...?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mark_h</div><div class="date">30th June 2021, 20:39</div></div><div class="posttext">Have tried a case with infor to see what they say?  They might assist, just not sure.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">andy2609</div><div class="date">1st July 2021, 00:55</div></div><div class="posttext">I was just now thinking that that’s just what I might have to resort to...<br />
<br />
I’ll post a solution if I ever get there.  I think this might be the first time I haven’t been able to reach a solution to a Baan problem. There’s nearly always an answer.   It’s a first, working on encrypted audit files for me though...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sprasad</div><div class="date">21st September 2021, 15:12</div></div><div class="posttext">Hi Andy, <br />
Did you try to reach Infor on this?<br />
I have the same problem the value is not returned by these two funtions.<br />
I tried to pass different values to param element but no luck. Interestingly I got INDEXOUT error if I pass 0.<br />
Please let me know if you tried to reach Infor else I will reach them.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">andy2609</div><div class="date">22nd September 2021, 10:09</div></div><div class="posttext">Hi.<br />
<br />
Yes, I did raise an incident with Infor Support, but they were unable to provide any help regarding the function. If you have access to the support site, see incident 15635333.<br />
<br />
This was the reply -<br />
<br />
“Event Note: Hello, <br />
<br />
You need to contact ICS, not standard support department. Even if I would like to help you, it is not an easy code. Specially with audit commands. I already sent your question to some of our developer without success answer, however, if I receipt answer from them, I will forward to you immediately, but unfortunately, your request is out of our scope of operation. <br />
<br />
We appreciate your understanding.”<br />
<br />
<br />
We changed our approach and used an alternative solution to our requirement that did not involve reading the audit files in the end.<br />
<br />
Best of luck with gaining further insight into these functions.<br />
Andy</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sprasad</div><div class="date">22nd September 2021, 18:41</div></div><div class="posttext">Hi Andy,<br />
Finally, I found what we are doing wrong. You need to send field.value as a string as it is not specified as ref field in help - &quot;field.value&quot; You will get the value to this field.<br />
Now the function looks like this - aud.put.new.field.value(pid, &quot;field.value&quot;, selection.id, table.id, fld.ids(fld.nr),1)<br />
Hope this will help you too.</div></div><hr />



</div>
</body>
</html>