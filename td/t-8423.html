<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="keywords" content="Can't query the ttadv380 table., baan,baanerp,erp,forum,discussion,bulletin board" />
	<meta name="description" content="[Archive] Can't query the ttadv380 table. Tools Development" />
	
	<title>Can't query the ttadv380 table. [Archive]  - Baanboard.com</title>
	<link rel="stylesheet" type="text/css" href="../styles.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar"><a href="../index.html">Newbaanboard</a> &gt; <a href="../index.html">Baan Quick Support: Functional &amp; Technical</a> &gt; <a href="../index.html">Tools Development</a> &gt; Can't query the ttadv380 table.</div>
<hr />
<div class="pda"></div>

<hr />

<div class="post"><div class="posttop"><div class="username">walter01</div><div class="date">14th January 2003, 18:17</div></div><div class="posttext">Please help.<br />
The following query will run but won't give me what I need.<br />
When I execute the query and enter the name of a query to retrieve the <br />
query data from I get layout data of the query name entered instead !<br />
i.e. When I enter the query name 'jobhis' I don't get the data stored in<br />
ttadv380 but get the layout data of the jobhis query while ttadv380 doesn't contain<br />
any layout data.<br />
<br />
select ttadv380.*<br />
from   ttadv380<br />
where  ttadv380._compnr = 000<br />
and    ttadv380.cqur &gt;= ttadv380.cqur.f<br />
and    ttadv380.cqur &lt;= ttadv380.cqur.t<br />
<br />
When I enter : jobhis<br />
<br />
I should get :<br />
----------------<br />
  Field      pos type  len   #  value<br />
   cqur    1)   1 str     9   1  jobhis<br />
   logn        10 str    12   1  wg01<br />
   desc        22 mbst   30   1  Job history overzicht.<br />
   desi        52 str    12   1  Walter<br />
   date        64 date    4   1  13-08-2002<br />
   outp        68 enum    1   1  1   (ttadv.qotp.list)<br />
   rcmp        69 enum    1   1  2   (ttyeno.no)<br />
   repo        70 str    14   1  tcsqljobhis<br />
   prop        84 str    25   1  ascif<br />
   selc       109 text    4   1  157724<br />
<br />
But I get :<br />
----------------<br />
<br />
Datum: 14-01-03 [17:11]                                                  Job history overzic<br />
Logistiek I'P en B'W<br />
<br />
-----------------------------------------------------------------------------------------------------<br />
Job | Omschrijving |Uitvoeringsdatum | Reden | Uitvoeringstijd | Beëindigingsdatum | Beëindigingstijd<br />
----+--------------+-----------------+-------+-----------------+-------------------+-----------------<br />
    |              |                 |       | 00:00           |                   | 00:00<br />
<br />
What's going on ?<br />
<br />
Walter</div></div><hr />


<div class="post"><div class="posttop"><div class="username">NikeNiek</div><div class="date">15th January 2003, 13:55</div></div><div class="posttext">It seems that you want a list of jobs using Easy SQL. You should create a query like:<br />
<br />
select ttaad510.*<br />
from ttaad510<br />
where ttaad510.cjob &gt;= ttaad510.cjob.f<br />
and ttaad510.cjob &lt;= ttaad510.cjob.t<br />
<br />
Is that what you want?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">walter01</div><div class="date">15th January 2003, 14:12</div></div><div class="posttext">Hello Niek,<br />
<br />
I need a list with Query names and the related report names and text numbers.<br />
<br />
Walter</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Djie-En</div><div class="date">15th January 2003, 17:26</div></div><div class="posttext">Hi,<br />
<br />
What is the contents if you do ttaad4500 on the ttadv380 table in company 000?<br />
<br />
GN</div></div><hr />


<div class="post"><div class="posttop"><div class="username">walter01</div><div class="date">15th January 2003, 17:31</div></div><div class="posttext">Hi GN,<br />
<br />
These are the contents of ttaad4500 -&gt; ttadv380 in 000.<br />
<br />
Field pos type len # value<br />
cqur 1) 1 str 9 1 jobhis <br />
logn 10 str 12 1 wg01 <br />
desc 22 mbst 30 1 Job history overzicht. <br />
desi 52 str 12 1 Walter <br />
date 64 date 4 1 13-08-2002 <br />
outp 68 enum 1 1 1 (ttadv.qotp.list) <br />
rcmp 69 enum 1 1 2 (ttyeno.no) <br />
repo 70 str 14 1 tcsqljobhis <br />
prop 84 str 25 1 ascif <br />
selc 109 text 4 1 157724<br />
<br />
<br />
Walter</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Djie-En</div><div class="date">15th January 2003, 18:26</div></div><div class="posttext">Hi, <br />
<br />
Has the data, which is now in the ttadv380 table, been imported from another company, or has the data been put into the ttadv380 table after running the batchjob?<br />
Does it concern ALL the data which is in the ttadv380 or are there also records with correct values?<br />
<br />
GN</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nick_rogers</div><div class="date">15th January 2003, 19:25</div></div><div class="posttext">try using the same query from the command line via the qptool6.1 - if that works then maybe its restrictions on the fields etc - if you are not superuser.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">walter01</div><div class="date">16th January 2003, 11:25</div></div><div class="posttext">GN,<br />
<br />
All the data in ttadv380 has been entered with session ttadv3180m000 &quot;Edit Query&quot;.<br />
Also we ar not experiencing any problems with any query. Except the one listed above.<br />
When I enter any query name that exists in ttadv380, I get the layout of that<br />
query instead of the query data as present in ttadv380. So it doesn't concern<br />
specific queries.<br />
<br />
<br />
NR,<br />
<br />
I'm superuser.<br />
I have tried the same query with qptool6.1 and that works !!!<br />
<br />
Output shown below:<br />
-------------------<br />
' ' ' ' ' ' 0 'jobhis ' 08132002 'Job history overzicht. ' 'Walter ' 1 'wg01 ' 0 1 'ascif ' 2 'tcsqljobhis ' 0 157724 0<br />
<br />
<br />
Maybe it has something to do with the report that goes wrong ?<br />
I have removed the query+report and renamed, typed-in, regenerated, compiled the query+report several times<br />
but to no avail.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">OmeLuuk</div><div class="date">16th January 2003, 11:33</div></div><div class="posttext">Run the job with setting:<br />
 -- -set TT_SQL_TRACE=041 -set DBSLOG=010 -keeplog -logfile trace.txt ttaad5203m000<br />
and see what happens with your data in the dbs.log file and in the trace.txt file.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">walter01</div><div class="date">16th January 2003, 15:34</div></div><div class="posttext">I ran the query with :<br />
ba6.1 -- -set TT_SQL_TRACE=041 -set DBSLOG=7577 -keeplog -logfile trace.txt ttadv3280m000<br />
<br />
Below is an extract of the DBSLOG file.<br />
<br />
(Somewhere in DBSLOG a select is done for the query name jobhis)<br />
<br />
 12349  ----- DBMS Where Input ----<br />
 12350  Bind nr 1 : cqur       : string  : 'jobhis   '<br />
 12351  SQL&gt; SELECT /*+ FIRST_ROWS index(a tttadv380000$idx1) */ a.t$cqur,a.t$repo,a.t$selc <br />
	FROM baan.tttadv380000 a WHERE a.t$cqur = :1<br />
<br />
(Baan finds the record(s) I'm looking for. Queryname, Reportname and Textnumber)<br />
<br />
 12364  ------ QPS Output Row -------<br />
 12365  Bind 1   : cqur    : string  : 'jobhis   '<br />
 12366  Bind 2   : repo    : string  : 'tcsqljobhis   '<br />
 12367  Bind 3   : selc    : long    : &lt;157724&gt;<br />
<br />
(What is this for ?)<br />
<br />
 12387  ----- DBMS Where Input ----<br />
 12388  Bind nr 1 : pacc       : string  : '        '<br />
 12389  Bind nr 2 : keyr       : string  : 'moduttstp             '<br />
 12390  SQL&gt; SELECT /*+ index(a tttadv999000$idx1) */ t$pacc,t$keyr,t$desc,t$Refcntd,t$Refcntu <br />
	FROM baan.tttadv999000 a WHERE t$pacc=:1 AND t$keyr=:2<br />
<br />
(I guess this has something to do with the print spooler)<br />
<br />
 12425  ----- DBMS Where Input ----<br />
 12426  Bind nr 1 : pacc       : string  : 'OPER_C3 '<br />
 12427  Bind nr 2 : keyr       : string  : 'progttstpsplopen    01'<br />
 12428  SQL&gt; SELECT /*+ index(a tttadv999000$idx1) */ t$pacc,t$keyr,t$desc,t$Refcntd,t$Refcntu <br />
	FROM baan.tttadv999000 a WHERE t$pacc=:1 AND t$keyr=:2<br />
<br />
(Further down DBSLOG Baan searches for the jobhis report which I didn't specify)<br />
<br />
 12787  ----- DBMS Where Input ----<br />
 12788  Bind nr 1 : clan       : string  : '1'<br />
 12789  Bind nr 2 : cpac       : string  : 'tc'<br />
 12790  Bind nr 3 : cmod       : string  : 'sql'<br />
 12791  Bind nr 4 : crep       : string  : 'jobhis   '<br />
 12792  SQL&gt; SELECT /*+ FIRST_ROWS index(a tttadv330000$idx1) */ a.t$bmrg,a.t$clan,a.t$cmod,a.t$cpac,a.t$crep,<br />
	a.t$cust,a.t$date,a.t$desc,a.t$desi,a.t$expi,a.t$fmrg,a.t$font,a.t$lanl,a.t$lmrg,a.t$mwhu,a.t$nrlb,<br />
	a.t$oblf,a.t$plen,a.t$rele,a.t$rtim,a.t$scpt,a.t$tmrg,a.t$txtc,a.t$vers,a.t$wlen <br />
	FROM baan.tttadv330000 a WHERE a.t$clan = :1 AND a.t$cpac =:2 AND a.t$cmod = :3 AND a.t$crep = :4<br />
<br />
I can't find an entry in the DBSLOG file where Baan starts processing my query output as if it has to be executed or something, but I'll keep searching.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">OmeLuuk</div><div class="date">17th January 2003, 10:09</div></div><div class="posttext">walter01: 12351  SQL&gt; SELECT /*+ FIRST_ROWS index(a tttadv380000$idx1) */ a.t$cqur,a.t$repo,a.t$selc <br />
	FROM baan.tttadv380000 a WHERE a.t$cqur = :1You run a level 2 DBdriver, the query gets passed to the DBMS(What is this for ?)Don't know12390  SQL&gt; SELECT /*+ index(a tttadv999000$idx1) */ t$pacc,t$keyr,t$desc,t$Refcntd,t$Refcntu <br />
	FROM baan.tttadv999000 a WHERE t$pacc=:1 AND t$keyr=:2ttadv999 is user defaults per session in this case the ttstpsplopen, so at this time your query has run already and the data (data is found) is going to be spooled to your report by the name of ...12788  Bind nr 1 : clan       : string  : '1'<br />
 12789  Bind nr 2 : cpac       : string  : 'tc'<br />
 12790  Bind nr 3 : cmod       : string  : 'sql'<br />
 12791  Bind nr 4 : crep       : string  : 'jobhis   '<br />
 12792  SQL&gt; SELECT /*+ FIRST_ROWS index(a tttadv330000$idx1) */ a.t$bmrg,a.t$clan,a.t$cmod,a.t$cpac,a.t$crep,<br />
	a.t$cust,a.t$date,a.t$desc,a.t$desi,a.t$expi,a.t$fmrg,a.t$font,a.t$lanl,a.t$lmrg,a.t$mwhu,a.t$nrlb,<br />
	a.t$oblf,a.t$plen,a.t$rele,a.t$rtim,a.t$scpt,a.t$tmrg,a.t$txtc,a.t$vers,a.t$wlen <br />
	FROM baan.tttadv330000 a WHERE a.t$clan = :1 AND a.t$cpac =:2 AND a.t$cmod = :3 AND a.t$crep = :4Your query wants to send data don't you? Data gets printed to a report, this is your (by the query generated) report which can only be found when the current developers package combination is set to the same package-VRC as where your report is in, in this case tc and the VRC of the report.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">walter01</div><div class="date">17th January 2003, 10:54</div></div><div class="posttext">I didn't mention this before but my test query is named wgtest08.<br />
At compile time it generated a report called tcsqlwgtest08 which is correct.<br />
I'm sorry about the dutch language but here are the settings for my test query.<br />
<br />
+--- My test Query --------------------------------------------------+<br />
|  Query          : wgtest08                   Bedrijf: 000          |<br />
|  Gebruiker      :                                                  |<br />
|  Omschrijving   : Restore data test.                               |<br />
|  Aangemaakt door: wg01                                             |<br />
|  Datum          : 14-01-03                                         |<br />
|  Soort uitvoer  : Reportlijst       Helpinformatie   : Nee         |<br />
|  Report         : tcsqlwgtest08     Tech. document.  : Nee         |<br />
|  Opties printen : ascif                                            |<br />
+--------------------------------------------------------------------+<br />
<br />
+--- Generated Report data ------------------------------------------+<br />
|  Taal           : 1   Nederlands             VRK     : B40O c3 live|<br />
|  Pakket         : tc  Common BAAN IV                               |<br />
|  Module         : sql Easy SQL                                     |<br />
|  Report         : wgtest08                   Vervallen     : Nee   |<br />
|  Aan taal kopp  :                                                  |<br />
|  Omschrijving   : Restore data test.                               |<br />
|  BAAN-gebruiker : wg01                                             |<br />
|  Datum          : 14-01-03                                         |<br />
|  Reportgrootte  :                                                  |<br />
|  Script aanwezig: Nee                     Tech. document.  : Nee   |<br />
|  Helptextcode   :                         Release notes    : Nee   |<br />
+--------------------------------------------------------------------+<br />
<br />
When I execute the query it is supposed to use the wgtest08 report, but it uses<br />
the report of the query name I entered in the ttadv380.cqur field of the select statement.<br />
I used the name 'jobhis' as an example, but when I execute the wgtest08 query it<br />
always uses the report of the query name I entered in the select statement.<br />
<br />
As you can see in the lines 12788 through 12791 of the DBSLOG file the wrong report<br />
is used for sending the query output to. <br />
It should be:<br />
Bind nr 1 : clan : string : '1'<br />
Bind nr 2 : cpac : string : 'tc'<br />
Bind nr 3 : cmod : string : 'sql'<br />
Bind nr 4 : crep : string : 'wgtest08' ( and not jobhis )<br />
<br />
Vrc settings etc are correct. All my (working) queries are in this pvrc.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nick_rogers</div><div class="date">17th January 2003, 18:48</div></div><div class="posttext">The only other thing I can think of - re-compile the actual easy sql report and see if that fixes the problem.<br />
<br />
also did you use the query by example or actualy write the query using the text manager option in the easy SQL session ? I have noticed problems when using the query by example and always end up by writing the sql myself.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">walter01</div><div class="date">18th January 2003, 00:44</div></div><div class="posttext">I always write the query myself and I have renamed, removed, recompiled, used other names etc. But I still get the same problem.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">OmeLuuk</div><div class="date">20th January 2003, 10:34</div></div><div class="posttext">Your data gets selected (according DBSLOG), but not printed on a correct report... The report handling is done by ttstpsplopen / ttstpsplclose. Get the newest versions of these.<br />
What tmp files are being made?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">walter01</div><div class="date">20th January 2003, 15:02</div></div><div class="posttext">Two temp files are created. They both contain the layout of the<br />
wrong report. Also the report script of the wrong report is executed.<br />
I can't try the latest version of ttstpsplopen / ttstpsplclose since our test machine is currently down.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nick_rogers</div><div class="date">20th January 2003, 17:58</div></div><div class="posttext">could be the the &quot;wrong&quot; version of the report object/script is being picked up.  Use the Display Objects by Report session and make sure the option to see all VRC's is set in you current PVRC setting.  Mybe there is an report/object named the same but it is only designed to display the few fields, and this report/object is being picked up instead of the &quot;wanted&quot; version that displays all the data.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">walter01</div><div class="date">20th January 2003, 18:34</div></div><div class="posttext">- The settings in ttadv0140m000 allow me to see all available software components.<br />
- Session ttadv3536m000 &quot;objects/report&quot; shows vrc B40Oc3live for both the source<br />
and object vrc. No other versions of sqlwgtest08 are present.<br />
I also checked this on the OS level.<br />
<br />
./tcB40O_c3_live/otcsql1/osqlwgtest081<br />
./tcB40O_c3_live/otcsql1/usqlwgtest081</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nick_rogers</div><div class="date">20th January 2003, 18:37</div></div><div class="posttext">well, I really cannot think of anything else other than logging a case with Baan support......unless someone else comes up with something.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">OmeLuuk</div><div class="date">21st January 2003, 00:40</div></div><div class="posttext">What if you run with<br />
-- -keeplog -logfile fileaccs.txt -dgbfdev ttaad5203m000<br />
Can you see the wrong report come by? Also the right one with an error?<br />
<br />
Maybe it is a good idea to reorganize all of the ttadv tables with session ttadv4228m000 to repair the files if they are corrupt (index wrong) and then try again?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">walter01</div><div class="date">27th January 2003, 11:22</div></div><div class="posttext">Everybody thanks for your efforts but this is what I got from Baan Support.<br />
<br />
SITUATION DESCRIPTION: <br />
Querying the ttadv380 table gives strange results.<br />
<br />
SOLUTION DESCRIPTION: <br />
In the session it self also the ttadv380 table is used.<br />
And the record read in the session itself is overwritten with the record from the query.<br />
Therefor you see this stange behaviour.<br />
<br />
To get this fully solved all records used in the session should be buffered.<br />
This has to much impact on the session behaviour and also on the performance etc...<br />
And also on the stability of the session.<br />
And it will not only be the ttadv380 table but all other tables used within this session.<br />
<br />
So you should accept this side effect when running this session on tables used by this session.<br />
<br />
-----<br />
<br />
Since qptools does give me the list I require I'll have to figure something out outside Baan.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">richard</div><div class="date">23rd August 2006, 15:56</div></div><div class="posttext">Hello,<br />
<br />
We were facing the same problem and opened an inquiry.<br />
The problem was solved after reorganization of ttadv380 (thru ttaad4225) !<br />
<br />
The only remining small problem is that baan goes to a different qury after processing the one on the table ttadv380, but the report is OK.<br />
<br />
Regards</div></div><hr />


<div class="post"><div class="posttop"><div class="username">walter01</div><div class="date">25th August 2006, 09:58</div></div><div class="posttext">Hello Richard,<br />
<br />
I wonder how reliable your solution is. I won't be suprised if you'll need to reorganize again some time in the future.<br />
<br />
Walter</div></div><hr />


<div class="post"><div class="posttop"><div class="username">just_fro</div><div class="date">17th September 2006, 02:18</div></div><div class="posttext">Hi Walter,<br />
<br />
you could allways use a small script in your wgtest08 report to get the data.<br />
(Like we did all the time ..... ;) .....maybe you'll recognize my profile )<br />
just start with some silly small query to get the report started and use the layout.again() command to get all your details from adv380</div></div><hr />



</div>
</body>
</html>