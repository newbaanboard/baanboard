<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="keywords" content="Image on Session, baan,baanerp,erp,forum,discussion,bulletin board" />
	<meta name="description" content="[Archive] Image on Session Tools Development" />
	
	<title>Image on Session [Archive]  - Baanboard.com</title>
	<link rel="stylesheet" type="text/css" href="../styles.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar"><a href="../index.html">Newbaanboard</a> &gt; <a href="../index.html">Baan Quick Support: Functional &amp; Technical</a> &gt; <a href="../index.html">Tools Development</a> &gt; Image on Session</div>
<hr />
<div class="pda"></div>

<hr />

<div class="post"><div class="posttop"><div class="username">sachinbaan</div><div class="date">6th February 2014, 13:13</div></div><div class="posttext">hi,<br />
<br />
I want to display passport size photograph on my session form,<br />
<br />
can any one help me.<br />
<br />
<br />
thanks &amp; regards,<br />
Sachin</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bhushanchanda</div><div class="date">6th February 2014, 15:47</div></div><div class="posttext">Hi,<br />
<br />
Never tried it but people have done it in Baan4 I guess you can get some ideas. Though, object creation and deletion functions are now depreciated.<br />
<br />
Similar thread for Baan 4 (http://www.baanboard.com/baanboard/showthread.php?t=12892)<br />
<br />
Also, from the latest Prog Guide:-<br />
<br />
On an ERP Enterprise form an image field can be defined which can be bound to a maintable record of a session. This mechanism can be used to show an image which is linked to a specific maintable record. The linked images are stored in a file system based image repository. <br />
<br />
Functional Characteristics<br />
Below some functional characteristics of images on forms are described.<br />
<br />
On an ERP Enterprise 4GL-form one or more images can be displayed in an area of a fixed size. <br />
The supported image formats are: JPEG, PNG and GIF (no animated GIF). <br />
Image files are stored in a central repository on the application server file system. System administration tools are available to manage this repository (e.g. move to another location). <br />
When multiple application servers are used, the image directory must be located on the master application server. The repository functions will make sure this is transparent for the application. <br />
An image can be dragged from a Web browser window or Windows Explorer window and dropped onto an ERP Enterprise form (when the application has enabled the image control for drop actions). <br />
Images on forms is only supported by the Web UI and not for the Worktop <br />
Authorization<br />
A user can view an image on a form when all of the following conditions are true:<br />
<br />
The user must have read permission for the image repository table: ttaad710 <br />
The user must have read permission, on the OS level, for the image repository directory which is defined in session &quot;Image parameters (ttaad7100m000)&quot;. <br />
A user can change an image on a form (through drag and drop) when all of the following conditions are true:<br />
<br />
In the Dynamic Form Editor (DFE), the drag/drop option for the image field must be checked. <br />
In the UI script the function: bind.image() must be called to bind the image to a maintable field. <br />
The current maintable record shown in the session must be editable. <br />
The user must have write permission for the image repository table: ttaad710 <br />
The user must have write permission, on the OS level, for the image repository directory which is defined in session &quot;Image parameters (ttaad7100m000)&quot;. <br />
Application data model<br />
Images are linked to records in application tables. This link is represented by a GUID and stored in a table field with the domain tcguid. This GUID uniquely identifies an image set. The GUID must be generated by the application and stored in the application table field. A proper place to fill this table field, when it is not yet filled, is in the dal method: before.save.object(). When no DAL is present it should be done from the UI script sections: before.write and before.rewrite. <br />
<br />
Image set<br />
An image set is a group of one or more images which belong together. An image set is identified by a GUID. These sets are stored in the image repository. Currently only one image per set can be stored. For future development the image repository is prepared for having more images in an image set <br />
<br />
Form design<br />
An image can be added to a form through the DFE. In the DFE choose the menu option: Insert ïƒ  Image. <br />
<br />
4GL UI script<br />
In the UI script the image field, which is defined in the DFE, must be declared as an external field of domain: ttdyf.picture. In order to bind the image field to a maintable record, the function bind.image() must be used.<br />
<br />
<br />
<br />
<br />
<br />
<br />
Sample Code:-Below a part of a 4GL-UI script is shown to illustrate the usage of the image functions. In this example the image is bound to the maintable of the session through the table field bpmdm001.guid. The image is shown in the view area of a multi-occ session. The function enable.save.on.occ.change() must be called to make sure that a possible dropped image is saved before selecting another occurrence in the grid. <br />
<br />
table   tbpmdm001                           |* Employee<br />
extern  domain ttdyf.picture  image.field   |* image form field<br />
<br />
after.form.read:<br />
	bind.image(&quot;image.field&quot;, &quot;bpmdm001.guid&quot;)<br />
	enable.save.on.occ.change()<br />
	<br />
after.update.db.commit:<br />
	if is.image.changed(&quot;image.field&quot;) then<br />
		if check.image.present(bpmd001.guid) then<br />
			|Optionally ask user if we should override the current image.<br />
		endif<br />
		save.image.field(&quot;image.field&quot;)<br />
	endif<br />
<br />
<br />
choice.recover.set:<br />
after.choice:<br />
	discard.changed.image(&quot;image.field&quot;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bhushanchanda</div><div class="date">7th February 2014, 10:58</div></div><div class="posttext">Hi,<br />
<br />
Tried it and works just fine.<br />
<br />
Steps:-<br />
<br />
1. Add a field in your table e.g. tcbed002 one field with name e.g tcbed002.guid with domain ttgyf.picture.<br />
2. Make sure you have a folder named $BSE\images on your server with full write permission to all the everyone.<br />
3. Create a simple maintain session with some window type e.g. List Window.<br />
4. In your Dynamic Form Editor under session properties, uncheck Overview Session and just tick details session.<br />
5. In you Dynamic Form Editor, add whatever fields you want to display on your session except tcbed002.guid.<br />
6. Go to specific and add select insert image and give some name to it e.g test.img. Give some width and height based on requirements.<br />
e.g Width = 45 and Height = 6.<br />
7. Save you form and compile the session.<br />
<br />
Now, in your session 4GL script, write these lines:-<br />
<br />
<br />
declaration table   ttcbed002                           |* My Table<br />
extern  domain ttdyf.picture test.img   |* image form field<br />
<br />
after.form.read:<br />
	bind.image(&quot;test.img&quot;, &quot;tcbed002.guid&quot;)<br />
	enable.save.on.occ.change()<br />
	<br />
after.update.db.commit:<br />
	if is.image.changed(&quot;test.img) then<br />
		<br />
		save.image.field(&quot;test.img)<br />
	endif<br />
<br />
<br />
choice.recover.set:<br />
after.choice:<br />
	discard.changed.image(&quot;test.img&quot;)<br />
<br />
Now, start your session and you are done. <br />
<br />
It will only work for WebUI and not on Worktop.<br />
<br />
Check the snapshot.<br />
<br />
All the best!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">metropoj</div><div class="date">12th February 2015, 18:38</div></div><div class="posttext">I've been through this example several times and not having any luck.<br />
<br />
The goal is to move our image data out of the Items-General table into our own<br />
<br />
1. I have created a new table / session as described.<br />
2. I am able to drag and drop into WEBUI my picture. I click on the save button and it is not saving the image, nor when I scroll to and from the record does the image change ( obviously ).<br />
<br />
I am not very good with in depth coding. <br />
<br />
I thought this code would function as is with a few changes but I'm missing something. Can anyone shed some light ?<br />
<br />
my .imag field is a tc.guid domain type, I have a guid there, I drag and drop a picture into the session, it doesn't save.<br />
<br />
<br />
I have full access to the images folder. Currently our images store themselves in this folder with my id from Items-General.<br />
<br />
We have Development licences.<br />
<br />
<br />
declaration:<br />
<br />
table   tcxitm101 | Development Table<br />
<br />
extern  domain ttdyf.picture image.field   |* image form field<br />
<br />
after.form.read:<br />
	bind.image(&quot;image.field&quot;, &quot;tcxitm101.imag&quot;)<br />
	message(&quot;after form read&quot;)<br />
	enable.save.on.occ.change()<br />
	<br />
after.update.db.commit:<br />
	if is.image.changed(&quot;image.field&quot;) then<br />
		save.image.field(&quot;image.field&quot;)<br />
	message(&quot;after update commit&quot;)<br />
	endif<br />
<br />
choice.recover.set:<br />
after.choice:<br />
	discard.changed.image(&quot;image.field&quot;)<br />
<br />
<br />
|****************************** Group Section ************************************<br />
<br />
<br />
|****************************** Function section **********************************</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bhushanchanda</div><div class="date">12th February 2015, 18:49</div></div><div class="posttext">Hi,<br />
<br />
Have you added a form field on the session? <br />
<br />
In your case - <br />
<br />
field name =  image.field<br />
domain = ttdyf.picture<br />
<br />
Once you save, does the rest of the data get saved?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">metropoj</div><div class="date">12th February 2015, 18:58</div></div><div class="posttext">Hi, yes. I did the &lt;Insert&gt; &lt;image&gt; onto my form and sized it / named it accordingly.<br />
<br />
My understanding was that I only needed a guid type field in my table and the script would assign image.field to type ttdyf.picture<br />
<br />
When I click off the record, all my other changes I've made saved to their fields.<br />
<br />
The picture I dragged and dropped stays on the screen until I exit. because it never saves it just hangs around  :) ...</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bhushanchanda</div><div class="date">12th February 2015, 19:10</div></div><div class="posttext">That is interesting. What about the guid? Does that gets any value?<br />
<br />
Also, did you take care of these 2 points as well?<br />
<br />
4. In your Dynamic Form Editor under session properties, uncheck Overview Session and just tick details session.<br />
5. In you Dynamic Form Editor, add whatever fields you want to display on your session except tcbed002.guid.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">metropoj</div><div class="date">12th February 2015, 19:22</div></div><div class="posttext">In DFE, if I rt click on the session name, properties, I made sure &quot;Details&quot; was the only one checked.<br />
<br />
I also made sure I didn't have the guid showing on the form.<br />
<br />
I found out I needed to create a GUID via script to populate the value, the fields do have a value by using this code :<br />
<br />
<br />
|****************************** Function section **********************************<br />
<br />
functions:<br />
<br />
<br />
function guid()<br />
{<br />
<br />
select cxitm101.guid<br />
from cxitm101 for update<br />
where cxitm101.guid &lt; &quot;1&quot;<br />
selectdo<br />
cxitm101.guid = uuid.generate$()<br />
db.update(tcxitm101,db.retry) <br />
commit.transaction()<br />
endselect<br />
<br />
message(&quot;GUID updated&quot;)<br />
<br />
}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bhushanchanda</div><div class="date">12th February 2015, 19:32</div></div><div class="posttext">You do not need a different function to generate guid.<br />
<br />
One more question.. Is there a DAL for that table?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">metropoj</div><div class="date">12th February 2015, 19:40</div></div><div class="posttext">That is interesting you say that I didn't need code for generating as my values were all empty and we thought maybe that was part of the problem.<br />
<br />
I don't have a DAL for the table. <br />
<br />
I figured Items-General does a lot of things in the background and why I had no guid being assigned.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bhushanchanda</div><div class="date">12th February 2015, 20:09</div></div><div class="posttext">Yes. LN takes care of generating GUID's.<br />
<br />
Some more things to try-<br />
<br />
Use this <br />
<br />
if bind.image(&quot;image.field&quot;, &quot;bpmdm001.guid&quot;) then<br />
      enable.save.on.occ.change()<br />
else<br />
      message(&quot;Cant bind image&quot;)<br />
endif<br />
<br />
And this-<br />
<br />
if save.image.field(&quot;image.field&quot;) then<br />
else<br />
     message(&quot;Unable to save image&quot;)<br />
endif<br />
<br />
Now, debug your program to see which one is failing.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">metropoj</div><div class="date">12th February 2015, 20:40</div></div><div class="posttext">OK, added the 2 pieces of code.<br />
<br />
When I run my session, the first message that pops up is &quot;After Form Read&quot; and then message &quot;Can't Bind Image&quot;<br />
<br />
I do have a UID present, the Scripting points to it. The second code option never pops up.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bhushanchanda</div><div class="date">12th February 2015, 21:06</div></div><div class="posttext">That means, the image is not binded at first place itself. I am not sure which image file I used at that time. I do not have access to that system currently so cannot try. Might check may be sometime later. Did you try attaching the same file to Item General session? <br />
<br />
Your bind.image is returning false so something is wrong with the image file then. Though I am not sure. Or may be your environment is missing some tools solution.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">metropoj</div><div class="date">13th February 2015, 14:42</div></div><div class="posttext">I am going to get some help with my code in general here as it triggers immediately when opening the session. <br />
<br />
I suspect it should trigger only when I make a change to that field, yes ?  <br />
<br />
Again I don't do a lot of this, mostly UEDLLs  :) ...  I will report back for curiosity sake after a review of what I've done so far.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bhushanchanda</div><div class="date">13th February 2015, 14:48</div></div><div class="posttext">Yes, it will get triggered on form load itself. Try with the same image if you are able to use it in Item General. If yes, then you can report open an incident with Infor. <br />
<br />
Also, I am assuming you are not using MMT Session.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">metropoj</div><div class="date">13th February 2015, 14:57</div></div><div class="posttext">Yeah, I have been reusing images from our library that are attached to items general. I just made a simple session to start to make it all work first before anything fancy.<br />
<br />
I'll report back how I make out. <br />
<br />
After I select the image and attach it on screen then save/exit the session, I GTM my table for that item. The GUID is still blank.  It doesn't create one when I start the session nor write one, that was why I used some code to generate at first.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">metropoj</div><div class="date">13th February 2015, 18:37</div></div><div class="posttext">I had placed a call with Infor just to confirm the whole GUID thing.<br />
<br />
They say there is a need for code to generate the UUID.<br />
<br />
I used the following to do so just as an fyi to other that may have a similar issue:<br />
<br />
** This however did not solve my image assignment problem  :)  I have asked them for assistance to troubleshoot that one.  **<br />
<br />
<br />
functions:<br />
<br />
function guid()<br />
{<br />
<br />
select cxitm101.uid2<br />
from cxitm101 for update<br />
where cxitm101.uid2=&quot;&quot;<br />
selectdo<br />
cxitm101.uid2 = uuid.generate$()<br />
db.update(tcxitm101,db.retry) <br />
commit.transaction()<br />
endselect<br />
<br />
message(&quot;GUID updated&quot;)<br />
<br />
}</div></div><hr />


<div class="post"><div class="posttop"><div class="username">metropoj</div><div class="date">26th February 2015, 14:39</div></div><div class="posttext">Once in a while you run into one of those things that doesn't work, then all of a sudden starts working for you through some change you make along the way.<br />
<br />
This was one of those cases  :) ...<br />
<br />
I re entered all code from scratch.<br />
<br />
I had to use code to assign the GUID upon entry of my session, not sure why if it is not needed by others, but I do need it.<br />
<br />
The GUID assigned properly. I still wasn't getting a picture.<br />
<br />
I resized my image to match the example above and BAM, it started showing my image.<br />
<br />
I resized my image to be that of the size we use in our items-General session, and now it works  :mad:<br />
<br />
So, what was the solution ? Keeping at it and blindly trying some stuff out.<br />
<br />
Thanks for all the assistance in helping me understand this better and coding examples.<br />
<br />
This was what i used to get things to populate for me in custom session.<br />
<br />
<br />
scripting:<br />
<br />
<br />
declaration:<br />
table tcxitm101 <br />
 <br />
extern domain ttdyf.picture test.img<br />
 <br />
after.form.read:<br />
 <br />
select cxitm101.imag<br />
from cxitm101 for update<br />
where cxitm101.imag &lt; &quot;1&quot;<br />
selectdo<br />
cxitm101.imag = uuid.generate$()<br />
db.update(tcxitm101,db.retry) <br />
commit.transaction()<br />
|message (&quot;guid assigned&quot;)<br />
endselect<br />
  <br />
bind.image (&quot;test.img&quot;, &quot;cxitm101.imag&quot;)<br />
enable.save.on.occ.change()<br />
 <br />
after.update.db.commit:<br />
 <br />
select cxitm101.imag<br />
from cxitm101 for update<br />
where cxitm101.imag &lt; &quot;1&quot;<br />
selectdo<br />
cxitm101.imag = uuid.generate$()<br />
db.update(tcxitm101,db.retry) <br />
commit.transaction()<br />
|message (&quot;guid assigned&quot;)<br />
endselect<br />
  <br />
if is.image.changed(&quot;test.img&quot;) then<br />
save.image.field(&quot;test.img&quot;)<br />
endif<br />
 <br />
choice.recover.set:<br />
after.choice:<br />
discard.changed.image(&quot;test.img&quot;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bhushanchanda</div><div class="date">26th February 2015, 14:47</div></div><div class="posttext">Yeah, I have been reusing images from our library that are attached to items general. <br />
<br />
May be this is the reason? Try reusing the image you have already attached. About the GUID thing. I missed to document that and didn't knew whether it's required or not until I tried it again. Lost memory. :) <br />
<br />
Glad you got it working. Yes, you do need to knock your head to get things working :) Keep 't up!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">metropoj</div><div class="date">26th February 2015, 14:52</div></div><div class="posttext">no worries, it was time well spent in the end after the solution :) <br />
<br />
When I redid my second attempt, I pointed back to the existing GUID field and my session found / shows all the original images so we are glad that happened.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">julierme.victor</div><div class="date">28th January 2016, 12:54</div></div><div class="posttext">Dears, good morning,<br />
<br />
I need to create a session in ERP LN FP3, which want to save images, but following the example of you could not drag the image to the web UI, see attached what I did, you can help me?:confused:<br />
<br />
Regards,<br />
Julierme</div></div><hr />


<div class="post"><div class="posttop"><div class="username">metropoj</div><div class="date">28th January 2016, 14:41</div></div><div class="posttext">Your session options look a little different than mine in FP7.<br />
<br />
I never saw what you session type is.<br />
<br />
Mine is a maintain Session, syncronized dialog to a main session.  Dynamic Session and integrated boxes checked on.<br />
<br />
So all else works except the drag and drop or it doesn't save at all ?  <br />
<br />
Your code is different from my example so I am not 100% sure if that is where the issue is.<br />
<br />
It was very finicky I remember getting the picture to show on the form based on the size of the window .  My picture image properties are width 80 and height 23.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">julierme.victor</div><div class="date">28th January 2016, 17:37</div></div><div class="posttext">My session is the type Hold.<br />
<br />
Just when I drag the image and try to paste it does not allow.<br />
<br />
As for the code did exactly as in your example.:confused:<br />
<br />
See the attached image.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">bhushanchanda</div><div class="date">2nd February 2016, 09:35</div></div><div class="posttext">Hi,<br />
<br />
Can you post your code if any so that someone can figure out the exact issue?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">julierme.victor</div><div class="date">3rd February 2016, 15:37</div></div><div class="posttext">Good day,<br />
<br />
My code already attached. The file calls image.doc .<br />
<br />
This solution does not work for the worktop ?<br />
<br />
Regards,</div></div><hr />



</div>
</body>
</html>