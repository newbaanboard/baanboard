<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="keywords" content="Afs For delete payment advice, baan,baanerp,erp,forum,discussion,bulletin board" />
	<meta name="description" content="[Archive] Afs For delete payment advice AFS/DDC/OLE: Function servers" />
	
	<title>Afs For delete payment advice [Archive]  - Baanboard.com</title>
	<link rel="stylesheet" type="text/css" href="../styles.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar"><a href="index.html">Newbaanboard</a> &gt; <a href="index.html">Baan SIGs</a> &gt; <a href="index.html">AFS/DDC/OLE: Function servers</a> &gt; Afs For delete payment advice</div>
<hr />
<div class="pda"></div>

<hr />

<div class="post"><div class="posttop"><div class="username">komal_hole</div><div class="date">17th July 2020, 09:02</div></div><div class="posttext">Hi everyone,<br />
<br />
     I am trying to delete payment advice record through AFS and that  is MMT Session tfcmg1609m000 (Payment Advice header Session) &amp; tfcmg1101m000 (Payment advice Line Sub session ) <br />
<br />
for that i have wrote this code. i  am expecting that when we try to delete the record from header session it should delete complete record along with respective lines as well<br />
   <br />
code is executing without any error message but record is not deleting <br />
<br />
    stpapi.put.field(&quot;tfcmg1609m000&quot;, &quot;tfcmg109.btno&quot;, str$(temp_btno2))<br />
     ret = stpapi.find(&quot;tfcmg1609m000&quot;, error.msg)<br />
     ret = stpapi.mark(&quot;tfcmg1609m000&quot;,error.msg)<br />
     |stpapi.get.field(&quot;tfcmg1609m000&quot;,&quot;tfcmg109.btno&quot;,error)<br />
if ret = 1 then<br />
      ret = stpapi.delete(&quot;tfcmg1609m000&quot;, true, error.msg)<br />
      stpapi.enum.answer(&quot;tfcmg1609m000&quot;, &quot;tfcmg00008&quot;, tcyesno.yes)<br />
      stpapi.enum.answer(&quot;tfcmg1609m000&quot;, &quot;tfcmg00019&quot;, tcyesno.yes)<br />
      if not ret then<br />
            ret = stpapi.recover(&quot;tfcmg1609m000&quot;, recover.msg)<br />
       endif<br />
endif<br />
<br />
Please kindly give some suggestions.. <br />
<br />
Note: when we delete the record if Payment advice status is Assign  then system ask 2 message 1.tfcmg00008 and 2.tfcmg00019<br />
<br />
<br />
Thanks in advance,<br />
Komal</div></div><hr />


<div class="post"><div class="posttop"><div class="username">mark_h</div><div class="date">20th July 2020, 15:08</div></div><div class="posttext">When you run the session manually does it work that way?  I mean typically in 4c4 we had to delete lines before deleting a header record..<br />
<br />
Seems there are also some issues with MMT sessions and AFS.  Might be better off using dal2 functionality.</div></div><hr />



</div>
</body>
</html>