<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="keywords" content="DDC and Triton3.1 a1, baan,baanerp,erp,forum,discussion,bulletin board" />
	<meta name="description" content="[Archive] DDC and Triton3.1 a1 AFS/DDC/OLE: Function servers" />
	
	<title>DDC and Triton3.1 a1 [Archive]  - Baanboard.com</title>
	<link rel="stylesheet" type="text/css" href="../styles.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar"><a href="index.html">Newbaanboard</a> &gt; <a href="index.html">Baan SIGs</a> &gt; <a href="index.html">AFS/DDC/OLE: Function servers</a> &gt; DDC and Triton3.1 a1</div>
<hr />
<div class="pda"></div>

<hr />

<div class="post"><div class="posttop"><div class="username">saso.its</div><div class="date">6th January 2004, 16:08</div></div><div class="posttext">Hello, <br />
<br />
could someone help me.  I would like to develop some integration<br />
interface between legacy system and Triton3.1 a1.  My problem occurs when l compile the script generated via session tuddc9201m000 (Fuinction server generator).  We used components from package TU:  6.1L_b7_glo0 although our customer has installed Triton 3.1 a1.  We have no problems with using &quot;tuddc&quot; sessions.  <br />
<br />
What I need is information, if Triton 3.1a1  can use DDC module.  Maybe someone can give me information, how to set up Tools  components (ottstp_standard and others) so they will work correctly with DDC for b7. <br />
<br />
Please, find attached file with error messages after compiling of generated very simple function server. Probably it will give you a better picture. Maybe someone can compile script  in Triton3.1 environment.<br />
<br />
Thanks in advance.<br />
<br />
<br />
|******************************************************************************<br />
|* Program generated by Function Server Generator<br />
|* Generate date:time(MMDDYY:HHMMSS): 121103:133435<br />
|******************************************************************************<br />
|* Necessary includes<br />
|******************************************************************************<br />
#include&quot;ituddc0010&quot;<br />
|******************************************************************************<br />
|* tcmcs9037  0  VRC 3.1C a1 dzs <br />
|* Test DDC<br />
|* General_User                  <br />
|* 2003-12-11<br />
|* Main table tcmcs037 ©ifre davkov, Form Type 1<br />
                                                                                <br />
<br />
	table	ttcmcs037	| ©ifre davkov<br />
<br />
<br />
<br />
<br />
|********************START DDC VARIABLES***************<br />
<br />
	extern long	ddc.compnr<br />
	extern domain	tccvat	ddc.tcmcs037.cvat<br />
	extern domain	tcdsca	ddc.tcmcs037.dsca<br />
	function long validate.fields()<br />
#define ddc.set.choice(X)<br />
^	update.status = X<br />
^	previous.choice = X<br />
^	choice = X<br />
#define ddc.set.field(X,Y,Z)<br />
^	ddc.fieldnumber = X<br />
^	ddc.formnumber = Y<br />
^	ddc.formfieldnumber = Z<br />
^	attr.input = true<br />
^	stp.check.input.error = 0<br />
<br />
|********************END DDC VARIABLES***************<br />
<br />
<br />
function ddc.main()<br />
{<br />
	ddc.define.function(add_sifre_davkov)<br />
	ddc.define.function(modify_sifre_davkov)<br />
	ddc.define.function(delete_sifre_davkov)<br />
}<br />
<br />
function ddc.define.fields()<br />
{<br />
	ddc.update.field(&quot;add_sifre_davkov&quot;,&quot;&quot;,1,&quot;ddc.compnr&quot;,<br />
			&quot;tcmcs.long&quot;,&quot;Company Number&quot;)<br />
	ddc.update.field(&quot;add_sifre_davkov&quot;,&quot;&quot;,2,&quot;ddc.tcmcs037.cvat&quot;,<br />
			&quot;tccvat&quot;,&quot;©if.dav.&quot;)<br />
	ddc.update.field(&quot;add_sifre_davkov&quot;,&quot;&quot;,3,&quot;ddc.tcmcs037.dsca&quot;,<br />
			&quot;tcdsca&quot;,&quot;Opis&quot;)<br />
	ddc.update.field(&quot;modify_sifre_davkov&quot;,&quot;&quot;,1,&quot;ddc.compnr&quot;,<br />
			&quot;tcmcs.long&quot;,&quot;Company Number&quot;)<br />
	ddc.update.field(&quot;modify_sifre_davkov&quot;,&quot;&quot;,2,&quot;ddc.tcmcs037.cvat&quot;,<br />
			&quot;tccvat&quot;,&quot;©if.dav.&quot;)<br />
	ddc.update.field(&quot;modify_sifre_davkov&quot;,&quot;&quot;,3,&quot;ddc.tcmcs037.dsca&quot;,<br />
			&quot;tcdsca&quot;,&quot;Opis&quot;)<br />
	ddc.update.field(&quot;delete_sifre_davkov&quot;,&quot;&quot;,1,&quot;ddc.compnr&quot;,<br />
			&quot;tcmcs.long&quot;,&quot;Company Number&quot;)<br />
	ddc.update.field(&quot;delete_sifre_davkov&quot;,&quot;&quot;,2,&quot;ddc.tcmcs037.cvat&quot;,<br />
			&quot;tccvat&quot;,&quot;©if.dav.&quot;)<br />
}<br />
<br />
function add_sifre_davkov()<br />
{<br />
<br />
	if ddc.switch.company(ddc.compnr) &lt; 0 then<br />
		return<br />
	endif<br />
<br />
	init.ddc.vars()<br />
	format.variables()<br />
	if check.variables() then<br />
		return<br />
	endif<br />
	ddc.set.choice(add.set)<br />
	if validate.fields() then<br />
		return<br />
	endif<br />
	update.status = 0<br />
	if not(ddc.errors) then<br />
		db.columns.to.record(ddc.main.table.id)<br />
		db.insert(ddc.main.table.id,db.retry)<br />
	endif<br />
	commit.transaction()<br />
	ddc.appl.delete()<br />
	ddc.switch.back()<br />
}<br />
<br />
function modify_sifre_davkov()<br />
{<br />
<br />
	if ddc.switch.company(ddc.compnr) &lt; 0 then<br />
		return<br />
	endif<br />
<br />
	init.ddc.vars()<br />
	format.variables()<br />
	if check.variables() then<br />
		return<br />
	endif<br />
	select tcmcs037.*<br />
	from tcmcs037 for update<br />
	where tcmcs037._index1 = {:ddc.tcmcs037.cvat}<br />
	selectdo<br />
		db.columns.to.record(ddc.main.table.id)<br />
		db.eq(ddc.main.table.id,db.delayed.lock)<br />
		copy.mem(ddc.rcd.occ.save,ddc.main.table.buffer)<br />
		ddc.set.choice(modify.set)<br />
		if validate.fields() then<br />
			return<br />
		endif<br />
		update.status = 0<br />
		if not(ddc.errors) then<br />
			db.columns.to.record(ddc.main.table.id)<br />
			db.update(ddc.main.table.id,db.retry)<br />
		endif<br />
		commit.transaction()<br />
	selectempty<br />
		ddc.error(0,&quot;Record not found&quot;)<br />
	endselect<br />
	ddc.appl.delete()<br />
	ddc.switch.back()<br />
}<br />
<br />
function delete_sifre_davkov()<br />
{<br />
<br />
	if ddc.switch.company(ddc.compnr) &lt; 0 then<br />
		return<br />
	endif<br />
<br />
	init.ddc.vars()<br />
	format.variables()<br />
	if check.variables() then<br />
		return<br />
	endif<br />
	select tcmcs037.*<br />
	from tcmcs037 for update<br />
	where tcmcs037._index1 = {:ddc.tcmcs037.cvat}<br />
	selectdo<br />
		db.columns.to.record(ddc.main.table.id)<br />
		db.eq(ddc.main.table.id,db.delayed.lock)<br />
		copy.mem(ddc.rcd.occ.save,ddc.main.table.buffer)<br />
		ddc.set.choice(mark.delete)<br />
		update.status = 0<br />
		if not(ddc.errors) then<br />
			db.columns.to.record(ddc.main.table.id)<br />
			db.delete(ddc.main.table.id,db.retry)<br />
		endif<br />
		commit.transaction()<br />
	selectempty<br />
		ddc.error(0,&quot;Record not found&quot;)<br />
	endselect<br />
	ddc.appl.delete()<br />
	ddc.switch.back()<br />
}<br />
function long validate.fields()<br />
{<br />
	if choice = add.set then<br />
		db.set.to.default(ddc.main.table.id)<br />
	endif<br />
	db.record.to.columns(ddc.main.table.id)<br />
<br />
	ddc.set.field(2,1,1)<br />
	if attr.input then<br />
		tcmcs037.cvat = ddc.tcmcs037.cvat<br />
	endif<br />
<br />
	ddc.set.field(3,1,2)<br />
	if attr.input then<br />
		tcmcs037.dsca = ddc.tcmcs037.dsca<br />
	endif<br />
<br />
<br />
	table.round(&quot;ttcmcs037&quot;)<br />
<br />
	ddc.set.field(0,0,0)<br />
<br />
	return(ddc.errors)<br />
<br />
}<br />
function init.ddc.vars()<br />
{<br />
	actual.occ = 1<br />
	attr.inpfld = 1<br />
	curr.key = 1<br />
	stp.abort.error = 0<br />
	stp.skip.error = 0<br />
	ddc.add.set = 1<br />
	ddc.modify.set = 1<br />
	ddc.mark.delete = 1<br />
	ddc.print.data = 0<br />
	ddc.cont.process = 0<br />
<br />
	if not ddc.main.table.id then<br />
		ddc.main.table = &quot;tcmcs037&quot;<br />
		ddc.main.table.id = db.bind(&quot;ttcmcs037&quot;,&quot;&quot;,get.compnr())<br />
		db.row.length(ddc.main.table.id,ddc.main.table.length)<br />
		db.unbind(ddc.main.table.id)<br />
		if alloc.mem(ddc.main.table.buffer,ddc.main.table.length) then<br />
			ddc.error(0,&quot;Memory Error&quot;)<br />
			end()<br />
		endif<br />
		ddc.main.table.id = db.bind(&quot;ttcmcs037&quot;,ddc.main.table.buffer,get.compnr())<br />
		if alloc.mem(ddc.rcd.occ.save,ddc.main.table.length) then<br />
			ddc.error(0,&quot;Memory Error&quot;)<br />
			end()<br />
		endif<br />
	endif<br />
<br />
}<br />
<br />
function format.variables()<br />
{<br />
<br />
	ddc.format.domain(&quot;tccvat&quot;,ddc.tcmcs037.cvat)<br />
	ddc.format.domain(&quot;tcdsca&quot;,ddc.tcmcs037.dsca)<br />
}<br />
<br />
function long check.variables()<br />
{<br />
<br />
	ddc.check.domain(2,&quot;tccvat&quot;,ddc.tcmcs037.cvat)<br />
	ddc.check.domain(3,&quot;tcdsca&quot;,ddc.tcmcs037.dsca)<br />
	return(ddc.errors)<br />
}<br />
<br />
|******************************************************************************<br />
|* 4GL program functions<br />
|******************************************************************************<br />
<br />
<br />
<br />
<br />
|******************************************************************************<br />
|* Error List<br />
|******************************************************************************<br />
<br />
ptcmcs9037f0(  84): Error: 'update.status' not declared (While expanding macro 'ddc.set.choice')<br />
ptcmcs9037f0(  84): Error: 'previous.choice' not declared (While expanding macro 'ddc.set.choice')<br />
ptcmcs9037f0(  90): Error: 'ddc.main.table.id' not declared<br />
ptcmcs9037f0( 114): Error: 'ddc.main.table.id' not declared<br />
ptcmcs9037f0( 116): Error: 'ddc.rcd.occ.save' not declared<br />
ptcmcs9037f0( 116): Error: 'ddc.main.table.buffer' not declared<br />
ptcmcs9037f0( 117): Error: 'update.status' not declared (While expanding macro 'ddc.set.choice')<br />
ptcmcs9037f0( 117): Error: 'previous.choice' not declared (While expanding macro 'ddc.set.choice')<br />
ptcmcs9037f0( 150): Error: 'ddc.main.table.id' not declared<br />
ptcmcs9037f0( 152): Error: 'ddc.rcd.occ.save' not declared<br />
ptcmcs9037f0( 152): Error: 'ddc.main.table.buffer' not declared<br />
ptcmcs9037f0( 153): Error: 'update.status' not declared (While expanding macro 'ddc.set.choice')<br />
ptcmcs9037f0( 153): Error: 'previous.choice' not declared (While expanding macro 'ddc.set.choice')<br />
ptcmcs9037f0( 169): Error: 'ddc.main.table.id' not declared<br />
ptcmcs9037f0( 173): Error: 'ddc.fieldnumber' not declared (While expanding macro 'ddc.set.field')<br />
ptcmcs9037f0( 173): Error: 'ddc.formnumber' not declared (While expanding macro 'ddc.set.field')<br />
ptcmcs9037f0( 173): Error: 'ddc.formfieldnumber' not declared (While expanding macro 'ddc.set.field')<br />
ptcmcs9037f0( 173): Error: 'stp.check.input.error' not declared (While expanding macro 'ddc.set.field')<br />
ptcmcs9037f0( 195): Error: 'curr.key' not declared<br />
ptcmcs9037f0( 196): Error: 'stp.abort.error' not declared<br />
ptcmcs9037f0( 197): Error: 'stp.skip.error' not declared<br />
ptcmcs9037f0( 198): Error: 'ddc.add.set' not declared<br />
ptcmcs9037f0( 199): Error: 'ddc.modify.set' not declared<br />
ptcmcs9037f0( 200): Error: 'ddc.mark.delete' not declared<br />
ptcmcs9037f0( 201): Error: 'ddc.print.data' not declared<br />
ptcmcs9037f0( 202): Error: 'ddc.cont.process' not declared<br />
ptcmcs9037f0( 204): Error: 'ddc.main.table.id' not declared<br />
ptcmcs9037f0( 205): Error: 'ddc.main.table' not declared<br />
ptcmcs9037f0( 206): Error: Dimensions in array assignment differs: 0:1<br />
ptcmcs9037f0( 207): Error: 'ddc.main.table.length' not declared<br />
ptcmcs9037f0( 207): Error: Argument 2 for function 'db.row.length' should be call by reference.<br />
ptcmcs9037f0( 209): Error: 'ddc.main.table.buffer' not declared<br />
ptcmcs9037f0( 214): Error: 'ddc.rcd.occ.save' not declared<br />
ptcmcs9037f0(  75): Error: Unresolved reference to function 'ddc.switch.company'.<br />
ptcmcs9037f0(  94): Error: Unresolved reference to function 'ddc.appl.delete'.<br />
ptcmcs9037f0(  95): Error: Unresolved reference to function 'ddc.switch.back'.<br />
ptcmcs9037f0( 225): Error: Unresolved reference to function 'ddc.format.domain'.<br />
ptcmcs9037f0( 232): Error: Unresolved reference to function 'ddc.check.domain'.<br />
<br />
 39 ERRORS    REPORTED.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jan van dillen</div><div class="date">6th January 2004, 17:05</div></div><div class="posttext">Hi,<br />
<br />
It looks to me that the program can not find the includes tuddc0016 and tuddc0014.<br />
<br />
I believe that the DDC module was written as a Noth American localisation in Triton 3.1, so it will probably be possible to use it.<br />
<br />
Regards,<br />
<br />
Jan</div></div><hr />


<div class="post"><div class="posttop"><div class="username">saso.its</div><div class="date">7th January 2004, 11:39</div></div><div class="posttext">I sucsess compile the script without errors. <br />
Problem occure because function tuddc0014 from package TU: 6.1L_b7_glo0 was maybe too old or wrong.  <br />
We used some components from BaanIV b1-b2 inviroment.<br />
<br />
Thanks for your suggestions.</div></div><hr />



</div>
</body>
</html>